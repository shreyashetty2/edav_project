[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "NYC Building Violation Analysis",
    "section": "",
    "text": "1 Introduction\nThe reason we chose this topic is because we are international students who recently moved to New York City to pursue MS in Data Science at Columbia University and we had faced a lot of issues trying to find a decent apartment in a well maintained building with minimum housing violations within a safe neighborhood. We feel this data is not very easily available to the public since we had to go through a lot of trouble to find the number of violations, compliance, and turnaround time taken by management to fix those issues. We aim to perform exploratory data analysis on NYC open datasets including data regarding building violations, permits, maintenance violations, and 311 requests to provide insights and understand patterns of violations in boroughs/regions and how the management responds to these vital issues in such a densely populated city. The insights we provide will be helpful to identify areas with comparatively more safety and maintenance problems and also help understand the relationship between complaints, housing regulations, official violations, and proactive improvement and repair by the management or city.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  Data",
    "section": "",
    "text": "2.0.1 Dataset 1\nThere are 4 dataset links that we will utilize from https://opendata.cityofnewyork.us. It is public data published by New York City agencies and other partners.\nLink: Housing Maintenance Code Violations\nThe data is provided from the Department of Housing Preservation and Development (HPD), and the dataset owner is NYC OpenData. It is updated daily. It currently has 10.4M rows and 41 columns. The format of the data is CSV in tabular format. It can be downloaded as CSV directly or using the API. Each row in this dataset contains information about one violation of the New York City Housing Maintenance Code or New York State Multiple Dwelling Law. The row identifier is ViolationID, and some of the other columns include BuildingID, RegistrationID (valid registration information), BoroID (to identify borough), Apartment (Apartment with violation), inspectiondate (Date when the violation was observed), etc. The violations are issued by HPD inspectors during building inspections, which are triggered by tenant complaints, routine checks, etc, and the data is collected.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#description",
    "href": "data.html#description",
    "title": "2  Data",
    "section": "2.1 Description",
    "text": "2.1 Description",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.2 Missing value analysis",
    "text": "2.2 Missing value analysis",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "project_code_final.html",
    "href": "project_code_final.html",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "",
    "text": "3.1 Loading Libraries\nCode\n# Libraries\nlibrary(dplyr)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\nCode\nlibrary(lubridate)\n\n\n\nAttaching package: 'lubridate'\n\n\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n\n\nCode\nlibrary(janitor)\n\n\n\nAttaching package: 'janitor'\n\n\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test\n\n\nCode\nlibrary(ggplot2)\nlibrary(ggalluvial)\nlibrary(tidyr)\nlibrary(scales)\nlibrary(data.table)\n\n\n\nAttaching package: 'data.table'\n\n\nThe following objects are masked from 'package:lubridate':\n\n    hour, isoweek, mday, minute, month, quarter, second, wday, week,\n    yday, year\n\n\nThe following objects are masked from 'package:dplyr':\n\n    between, first, last\n\n\nCode\nlibrary(readr)\n\n\n\nAttaching package: 'readr'\n\n\nThe following object is masked from 'package:scales':\n\n    col_factor\n\n\nCode\nlibrary(tidyverse)\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats 1.0.1     ✔ stringr 1.6.0\n✔ purrr   1.1.0     ✔ tibble  3.3.0\n\n\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ data.table::between() masks dplyr::between()\n✖ readr::col_factor()   masks scales::col_factor()\n✖ purrr::discard()      masks scales::discard()\n✖ dplyr::filter()       masks stats::filter()\n✖ data.table::first()   masks dplyr::first()\n✖ data.table::hour()    masks lubridate::hour()\n✖ data.table::isoweek() masks lubridate::isoweek()\n✖ dplyr::lag()          masks stats::lag()\n✖ data.table::last()    masks dplyr::last()\n✖ data.table::mday()    masks lubridate::mday()\n✖ data.table::minute()  masks lubridate::minute()\n✖ data.table::month()   masks lubridate::month()\n✖ data.table::quarter() masks lubridate::quarter()\n✖ data.table::second()  masks lubridate::second()\n✖ purrr::transpose()    masks data.table::transpose()\n✖ data.table::wday()    masks lubridate::wday()\n✖ data.table::week()    masks lubridate::week()\n✖ data.table::yday()    masks lubridate::yday()\n✖ data.table::year()    masks lubridate::year()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\nCode\nlibrary(forcats)\nlibrary(stringr)\nlibrary(redav)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#loading-housing-violations-and-311-complaints-datasets",
    "href": "project_code_final.html#loading-housing-violations-and-311-complaints-datasets",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.2 Loading Housing Violations and 311 Complaints Datasets",
    "text": "3.2 Loading Housing Violations and 311 Complaints Datasets\n\n\nCode\n# ========== HOUSING VIOLATIONS ==========\nhousing_raw &lt;- read.csv(\"/Users/shreyashetty/Documents/Fall 2025 Courses/EDAV/Final_Project/edav_project/datasets/Housing_Violations_2022_onwards.csv\")\n\n# ========== 311 HOUSING COMPLAINTS ==========\nsr311_raw   &lt;- read.csv(\"/Users/shreyashetty/Documents/Fall 2025 Courses/EDAV/Final_Project/edav_project/datasets/311_Housing_Complaints_2022_onwards.csv\")\n\n\ncat(\"Housing Violations:\", nrow(housing_raw), \"rows x\", ncol(housing_raw), \"columns\\n\")\n\n\nHousing Violations: 589005 rows x 41 columns\n\n\nCode\ncat(\"311 Complaints:\", nrow(sr311_raw ), \"rows x\", ncol(sr311_raw ), \"columns\\n\")\n\n\n311 Complaints: 425248 rows x 42 columns",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#inspecting-data-and-column-names-for-both-the-datasets",
    "href": "project_code_final.html#inspecting-data-and-column-names-for-both-the-datasets",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.3 Inspecting data and column names for both the datasets:",
    "text": "3.3 Inspecting data and column names for both the datasets:\n\n3.3.1 Housing Violations Dataset\n\n\nCode\nhead(housing_raw)\n\n\n  ViolationID BuildingID RegistrationID BoroID   Borough HouseNumber\n1    15004789     805012         100420      1 MANHATTAN     144REAR\n2    14817075       9458         104092      1 MANHATTAN           1\n3    14831546      40441         118126      1 MANHATTAN         158\n4    15313781      18016         120064      1 MANHATTAN         314\n5    14838558       8157         118733      1 MANHATTAN        3885\n6    14914309      43369         111345      1 MANHATTAN         502\n  LowHouseNumber HighHouseNumber         StreetName StreetCode Postcode\n1        144rear        146 REAR      LUDLOW STREET      25090    10002\n2              1               7 CHRISTOPHER STREET      15210    10014\n3            158             158    WEST 132 STREET      36410    10027\n4            314             314     EAST 89 STREET      18770    10128\n5           3885            3897           BROADWAY      13610    10032\n6            502             502    WEST 180 STREET      37350    10033\n  Apartment Story Block Lot Class InspectionDate ApprovedDate\n1              NA   411  45     A     2022-03-08   03/08/2022\n2        9C     9   610  60     A     2022-02-10   02/10/2022\n3        3N     3  1916  55     B     2022-02-11   02/11/2022\n4               0  1551  43     C     2022-08-16   08/17/2022\n5       20B     2  2137  80     B     2022-02-14   02/15/2022\n6         7     3  2152  45     B     2022-02-23   02/24/2022\n  OriginalCertifyByDate OriginalCorrectByDate NewCertifyByDate NewCorrectByDate\n1            06/25/2022            06/11/2022                                  \n2            05/31/2022            05/17/2022                                  \n3            04/04/2022            03/21/2022                                  \n4            09/06/2022            09/01/2022                                  \n5            04/06/2022            03/23/2022                                  \n6            04/15/2022            04/01/2022                                  \n  CertifiedDate OrderNumber   NOVID\n1                      1507 7793231\n2                       554 7636476\n3                       579 7638268\n4    12/05/2022         530 8007840\n5    03/18/2022         579 7651705\n6    03/18/2022        1503 7724697\n                                                                                                                                                                                         NOVDescription\n1 (A) § HMC:FILE ANNUAL BEDBUG REPORT IN ACCORDANCE WITH HPD RULE AS DESCRIBED ON THE BACK OF THIS NOTICE OF VIOLATION OR AS DESCRIBED ON HPDâ\\u0080\\u0099S WEBSITE, WWW.NYC.GOV\\\\HPD, SEARCH BED BUGS.\n2                           § 27-2005 ADM CODE PAINT METAL IN ACCORDANCE WITH DEPT. REGULATION RADIATOR AT THE SOUTH WALL IN THE KITCHEN LOCATED AT APT 9C, 9th STORY, 3rd APARTMENT FROM EAST AT SOUTH\n3                                                § 27-2026 ADM CODE REPAIR THE LEAKY AND/OR DEFECTIVE FAUCETS AT SINK IN THE KITCHENETTE LOCATED AT B-ROOM 3N, 3rd STORY, 1st B-ROOM FROM NORTH AT EAST\n4                                                                                  § 27-2005, 27-2007, 27-2041.1 HMC: REPLACE OR REPAIR THE SELF-CLOSING DOORS THAT IS MISSING OR DEFECTIVE AT BULKHEAD\n5                                             § 27-2026 ADM CODE REPAIR THE LEAKY AND/OR DEFECTIVE FAUCETS AT WASHBASIN IN THE BATHROOM LOCATED AT APT 20B, 2nd STORY, 1st APARTMENT FROM NORTH AT EAST\n6                             § 27-2046.1 HMC: REPAIR OR REPLACE THE CARBON MONOXIDE DETECTING DEVICE(S). MISSING IN THE ENTIRE APARTMENT LOCATED AT APT 7, 3rd STORY, 1st APARTMENT FROM EAST AT SOUTH\n  NOVIssuedDate CurrentStatusID       CurrentStatus CurrentStatusDate  NovType\n1    03/08/2022               9 VIOLATION DISMISSED        03/23/2022 Original\n2    02/11/2022              19    VIOLATION CLOSED        03/06/2024 Original\n3    02/14/2022               2        NOV SENT OUT        02/14/2022 Original\n4    08/18/2022              19    VIOLATION CLOSED        06/29/2023 Original\n5    02/16/2022               9 VIOLATION DISMISSED        05/31/2022 Original\n6    02/25/2022               9 VIOLATION DISMISSED        05/31/2022 Original\n  ViolationStatus RentImpairing Latitude Longitude CommunityBoard\n1           Close             N       NA        NA             NA\n2           Close             N 40.73407 -73.99976              2\n3            Open             N 40.81285 -73.94384             10\n4           Close             N 40.77955 -73.94975              8\n5           Close             N 40.83741 -73.94244             12\n6           Close             N 40.84754 -73.93169             12\n  CouncilDistrict CensusTract     BIN        BBL                        NTA\n1              NA          NA      NA         NA                           \n2               3          71 1010692 1006100060               West Village\n3               9         226 1058117 1019160055             Harlem (North)\n4               5       14602 1050093 1015510043  Upper East Side-Yorkville\n5               7         245 1063363 1021370080 Washington Heights (South)\n6              10         261 1063601 1021520045 Washington Heights (South)\n\n\nCode\ncolnames(housing_raw)\n\n\n [1] \"ViolationID\"           \"BuildingID\"            \"RegistrationID\"       \n [4] \"BoroID\"                \"Borough\"               \"HouseNumber\"          \n [7] \"LowHouseNumber\"        \"HighHouseNumber\"       \"StreetName\"           \n[10] \"StreetCode\"            \"Postcode\"              \"Apartment\"            \n[13] \"Story\"                 \"Block\"                 \"Lot\"                  \n[16] \"Class\"                 \"InspectionDate\"        \"ApprovedDate\"         \n[19] \"OriginalCertifyByDate\" \"OriginalCorrectByDate\" \"NewCertifyByDate\"     \n[22] \"NewCorrectByDate\"      \"CertifiedDate\"         \"OrderNumber\"          \n[25] \"NOVID\"                 \"NOVDescription\"        \"NOVIssuedDate\"        \n[28] \"CurrentStatusID\"       \"CurrentStatus\"         \"CurrentStatusDate\"    \n[31] \"NovType\"               \"ViolationStatus\"       \"RentImpairing\"        \n[34] \"Latitude\"              \"Longitude\"             \"CommunityBoard\"       \n[37] \"CouncilDistrict\"       \"CensusTract\"           \"BIN\"                  \n[40] \"BBL\"                   \"NTA\"                  \n\n\n\n\nCode\nsummary(housing_raw)\n\n\n  ViolationID         BuildingID      RegistrationID       BoroID \n Min.   :14753195   Min.   :      1   Min.   :     0   Min.   :1  \n 1st Qu.:15642804   1st Qu.:  13158   1st Qu.:107423   1st Qu.:1  \n Median :16530701   Median :  27948   Median :116840   Median :1  \n Mean   :16557793   Mean   : 101240   Mean   :120363   Mean   :1  \n 3rd Qu.:17447307   3rd Qu.:  41552   3rd Qu.:129130   3rd Qu.:1  \n Max.   :18445551   Max.   :1017519   Max.   :670032   Max.   :1  \n                                                                  \n   Borough          HouseNumber        LowHouseNumber     HighHouseNumber   \n Length:589005      Length:589005      Length:589005      Length:589005     \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n                                                                            \n  StreetName          StreetCode       Postcode      Apartment        \n Length:589005      Min.   :    0   Min.   : 2019   Length:589005     \n Class :character   1st Qu.:17090   1st Qu.:10025   Class :character  \n Mode  :character   Median :28390   Median :10031   Mode  :character  \n                    Mean   :25830   Mean   :10033                     \n                    3rd Qu.:36210   3rd Qu.:10034                     \n                    Max.   :72001   Max.   :10463                     \n                                    NA's   :147                       \n     Story             Block           Lot               Class          \n Min.   :  0.000   Min.   :    5   Length:589005      Length:589005     \n 1st Qu.:  1.000   1st Qu.: 1441   Class :character   Class :character  \n Median :  3.000   Median : 1929   Mode  :character   Mode  :character  \n Mean   :  3.513   Mean   : 1685                                        \n 3rd Qu.:  5.000   3rd Qu.: 2114                                        \n Max.   :964.000   Max.   :20094                                        \n NA's   :77094                                                          \n InspectionDate     ApprovedDate       OriginalCertifyByDate\n Length:589005      Length:589005      Length:589005        \n Class :character   Class :character   Class :character     \n Mode  :character   Mode  :character   Mode  :character     \n                                                            \n                                                            \n                                                            \n                                                            \n OriginalCorrectByDate NewCertifyByDate   NewCorrectByDate   CertifiedDate     \n Length:589005         Length:589005      Length:589005      Length:589005     \n Class :character      Class :character   Class :character   Class :character  \n Mode  :character      Mode  :character   Mode  :character   Mode  :character  \n                                                                               \n                                                                               \n                                                                               \n                                                                               \n  OrderNumber         NOVID          NOVDescription     NOVIssuedDate     \n Min.   :   4.0   Min.   : 7594735   Length:589005      Length:589005     \n 1st Qu.: 508.0   1st Qu.: 8266552   Class :character   Class :character  \n Median : 556.0   Median : 8878711   Mode  :character   Mode  :character  \n Mean   : 677.2   Mean   : 8867791                                        \n 3rd Qu.: 672.0   3rd Qu.: 9466868                                        \n Max.   :1524.0   Max.   :10127752                                        \n                  NA's   :34593                                           \n CurrentStatusID CurrentStatus      CurrentStatusDate    NovType         \n Min.   : 1.00   Length:589005      Length:589005      Length:589005     \n 1st Qu.: 9.00   Class :character   Class :character   Class :character  \n Median : 9.00   Mode  :character   Mode  :character   Mode  :character  \n Mean   :12.87                                                           \n 3rd Qu.:19.00                                                           \n Max.   :50.00                                                           \n                                                                         \n ViolationStatus    RentImpairing         Latitude       Longitude     \n Length:589005      Length:589005      Min.   :40.70   Min.   :-74.02  \n Class :character   Class :character   1st Qu.:40.78   1st Qu.:-73.97  \n Mode  :character   Mode  :character   Median :40.81   Median :-73.95  \n                                       Mean   :40.80   Mean   :-73.95  \n                                       3rd Qu.:40.83   3rd Qu.:-73.94  \n                                       Max.   :40.88   Max.   :-73.91  \n                                       NA's   :77      NA's   :77      \n CommunityBoard   CouncilDistrict   CensusTract         BIN         \n Min.   : 1.000   Min.   : 1.000   Min.   :    6   Min.   :1000000  \n 1st Qu.: 7.000   1st Qu.: 6.000   1st Qu.:  183   1st Qu.:1052051  \n Median :10.000   Median : 8.000   Median :  230   Median :1060493  \n Mean   : 8.877   Mean   : 7.215   Mean   : 2592   Mean   :1054353  \n 3rd Qu.:12.000   3rd Qu.: 9.000   3rd Qu.:  279   3rd Qu.:1063870  \n Max.   :12.000   Max.   :17.000   Max.   :31704   Max.   :2000000  \n NA's   :77       NA's   :77       NA's   :77      NA's   :305      \n      BBL                NTA           \n Min.   :0.000e+00   Length:589005     \n 1st Qu.:1.014e+09   Class :character  \n Median :1.019e+09   Mode  :character  \n Mean   :1.017e+09                     \n 3rd Qu.:1.021e+09                     \n Max.   :2.024e+09                     \n NA's   :305                           \n\n\n\n\n3.3.2 311 Complaints dataset\n\n\nCode\nhead(sr311_raw)\n\n\n  Unique.Key           Created.Date Closed.Date Agency\n1   66934900 11/23/2025 11:58:19 PM                HPD\n2   66932786 11/23/2025 11:55:32 PM                HPD\n3   66931601 11/23/2025 11:52:04 PM                HPD\n4   66929338 11/23/2025 11:51:49 PM                HPD\n5   66933739 11/23/2025 11:48:51 PM                HPD\n6   66929209 11/23/2025 11:42:51 PM                HPD\n                                         Agency.Name Complaint.Type\n1 Department of Housing Preservation and Development HEAT/HOT WATER\n2 Department of Housing Preservation and Development       PLUMBING\n3 Department of Housing Preservation and Development HEAT/HOT WATER\n4 Department of Housing Preservation and Development HEAT/HOT WATER\n5 Department of Housing Preservation and Development HEAT/HOT WATER\n6 Department of Housing Preservation and Development HEAT/HOT WATER\n       Descriptor        Location.Type Incident.Zip     Incident.Address\n1 ENTIRE BUILDING RESIDENTIAL BUILDING        10028 425 EAST   84 STREET\n2  BATHTUB/SHOWER RESIDENTIAL BUILDING        10040 121 FT GEORGE AVENUE\n3 ENTIRE BUILDING RESIDENTIAL BUILDING        10040 121 FT GEORGE AVENUE\n4 ENTIRE BUILDING RESIDENTIAL BUILDING        10028 425 EAST   84 STREET\n5 ENTIRE BUILDING RESIDENTIAL BUILDING        10025 242 WEST  109 STREET\n6  APARTMENT ONLY RESIDENTIAL BUILDING        10009          26 1 AVENUE\n       Street.Name Cross.Street.1 Cross.Street.2 Intersection.Street.1\n1 EAST   84 STREET                                                    \n2 FT GEORGE AVENUE                                                    \n3 FT GEORGE AVENUE                                                    \n4 EAST   84 STREET                                                    \n5 WEST  109 STREET                                                    \n6         1 AVENUE                                                    \n  Intersection.Street.2 Address.Type     City Landmark Facility.Type Status\n1                            ADDRESS NEW YORK                          Open\n2                            ADDRESS NEW YORK                          Open\n3                            ADDRESS NEW YORK                          Open\n4                            ADDRESS NEW YORK                          Open\n5                            ADDRESS NEW YORK                          Open\n6                            ADDRESS NEW YORK                          Open\n  Due.Date\n1       NA\n2       NA\n3       NA\n4       NA\n5       NA\n6       NA\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Resolution.Description\n1 This complaint is a duplicate of a building-wide condition already reported by another tenant.  The original complaint is still open, and HPD may only need to confirm that the condition exists by inspecting one apartment.  If we cannot contact the tenant from the original complaint or get access to that apartment, HPD may attempt to contact the person who filed this complaint to verify the correction of the condition or may conduct an inspection of your unit. You can check HPDONLINE to see if a\n2                                                                                                                                                         The following complaint conditions are still open. HPD has already attempted to notify the property owner that the condition exists; the tenant should provide access for the owner to make the repair.  HPD may attempt to contact the tenant by phone to verify the correction of the condition or an HPD Inspector may attempt to conduct an inspection.\n3 This complaint is a duplicate of a building-wide condition already reported by another tenant.  The original complaint is still open, and HPD may only need to confirm that the condition exists by inspecting one apartment.  If we cannot contact the tenant from the original complaint or get access to that apartment, HPD may attempt to contact the person who filed this complaint to verify the correction of the condition or may conduct an inspection of your unit. You can check HPDONLINE to see if a\n4                                                                                                                                                         The following complaint conditions are still open. HPD has already attempted to notify the property owner that the condition exists; the tenant should provide access for the owner to make the repair.  HPD may attempt to contact the tenant by phone to verify the correction of the condition or an HPD Inspector may attempt to conduct an inspection.\n5 This complaint is a duplicate of a building-wide condition already reported by another tenant.  The original complaint is still open, and HPD may only need to confirm that the condition exists by inspecting one apartment.  If we cannot contact the tenant from the original complaint or get access to that apartment, HPD may attempt to contact the person who filed this complaint to verify the correction of the condition or may conduct an inspection of your unit. You can check HPDONLINE to see if a\n6                                                                                                                                                         The following complaint conditions are still open. HPD has already attempted to notify the property owner that the condition exists; the tenant should provide access for the owner to make the repair.  HPD may attempt to contact the tenant by phone to verify the correction of the condition or an HPD Inspector may attempt to conduct an inspection.\n  Resolution.Action.Updated.Date Community.Board        BBL   Borough\n1         11/23/2025 12:00:00 AM    08 MANHATTAN 1015640012 MANHATTAN\n2         11/23/2025 12:00:00 AM    12 MANHATTAN 1021490265 MANHATTAN\n3         11/23/2025 12:00:00 AM    12 MANHATTAN 1021490265 MANHATTAN\n4         11/23/2025 12:00:00 AM    08 MANHATTAN 1015640012 MANHATTAN\n5         11/23/2025 12:00:00 AM    07 MANHATTAN 1018800053 MANHATTAN\n6         11/23/2025 12:00:00 AM    03 MANHATTAN 1004290009 MANHATTAN\n  X.Coordinate..State.Plane. Y.Coordinate..State.Plane. Open.Data.Channel.Type\n1                    998,207                    221,730                 ONLINE\n2                  1,004,446                    251,683                  PHONE\n3                  1,004,446                    251,683                  PHONE\n4                    998,207                    221,730                 ONLINE\n5                    993,732                    231,824                  PHONE\n6                    987,565                    202,976                  PHONE\n  Park.Facility.Name Park.Borough Vehicle.Type Taxi.Company.Borough\n1        Unspecified    MANHATTAN           NA                   NA\n2        Unspecified    MANHATTAN           NA                   NA\n3        Unspecified    MANHATTAN           NA                   NA\n4        Unspecified    MANHATTAN           NA                   NA\n5        Unspecified    MANHATTAN           NA                   NA\n6        Unspecified    MANHATTAN           NA                   NA\n  Taxi.Pick.Up.Location Bridge.Highway.Name Bridge.Highway.Direction Road.Ramp\n1                    NA                  NA                       NA        NA\n2                    NA                  NA                       NA        NA\n3                    NA                  NA                       NA        NA\n4                    NA                  NA                       NA        NA\n5                    NA                  NA                       NA        NA\n6                    NA                  NA                       NA        NA\n  Bridge.Highway.Segment Latitude Longitude\n1                     NA 40.77526 -73.94961\n2                     NA 40.85746 -73.92699\n3                     NA 40.85746 -73.92699\n4                     NA 40.77526 -73.94961\n5                     NA 40.80297 -73.96575\n6                     NA 40.72380 -73.98804\n                                 Location CreatedDate\n1 (40.77526292188198, -73.94960785720805)  2025-11-23\n2 (40.85746342279737, -73.92699164532567)  2025-11-23\n3 (40.85746342279737, -73.92699164532567)  2025-11-23\n4 (40.77526292188198, -73.94960785720805)  2025-11-23\n5 (40.80297417373674, -73.96575071974307)  2025-11-23\n6 (40.72379831989205, -73.98804034230925)  2025-11-23\n\n\nCode\ncolnames(sr311_raw)\n\n\n [1] \"Unique.Key\"                     \"Created.Date\"                  \n [3] \"Closed.Date\"                    \"Agency\"                        \n [5] \"Agency.Name\"                    \"Complaint.Type\"                \n [7] \"Descriptor\"                     \"Location.Type\"                 \n [9] \"Incident.Zip\"                   \"Incident.Address\"              \n[11] \"Street.Name\"                    \"Cross.Street.1\"                \n[13] \"Cross.Street.2\"                 \"Intersection.Street.1\"         \n[15] \"Intersection.Street.2\"          \"Address.Type\"                  \n[17] \"City\"                           \"Landmark\"                      \n[19] \"Facility.Type\"                  \"Status\"                        \n[21] \"Due.Date\"                       \"Resolution.Description\"        \n[23] \"Resolution.Action.Updated.Date\" \"Community.Board\"               \n[25] \"BBL\"                            \"Borough\"                       \n[27] \"X.Coordinate..State.Plane.\"     \"Y.Coordinate..State.Plane.\"    \n[29] \"Open.Data.Channel.Type\"         \"Park.Facility.Name\"            \n[31] \"Park.Borough\"                   \"Vehicle.Type\"                  \n[33] \"Taxi.Company.Borough\"           \"Taxi.Pick.Up.Location\"         \n[35] \"Bridge.Highway.Name\"            \"Bridge.Highway.Direction\"      \n[37] \"Road.Ramp\"                      \"Bridge.Highway.Segment\"        \n[39] \"Latitude\"                       \"Longitude\"                     \n[41] \"Location\"                       \"CreatedDate\"                   \n\n\n\n\nCode\nsummary(sr311_raw)\n\n\n   Unique.Key       Created.Date       Closed.Date           Agency         \n Min.   :52939155   Length:425248      Length:425248      Length:425248     \n 1st Qu.:56470870   Class :character   Class :character   Class :character  \n Median :59938206   Mode  :character   Mode  :character   Mode  :character  \n Mean   :59892593                                                           \n 3rd Qu.:63464249                                                           \n Max.   :66935006                                                           \n                                                                            \n Agency.Name        Complaint.Type      Descriptor        Location.Type     \n Length:425248      Length:425248      Length:425248      Length:425248     \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n                                                                            \n  Incident.Zip   Incident.Address   Street.Name        Cross.Street.1    \n Min.   :10000   Length:425248      Length:425248      Length:425248     \n 1st Qu.:10024   Class :character   Class :character   Class :character  \n Median :10030   Mode  :character   Mode  :character   Mode  :character  \n Mean   :10032                                                           \n 3rd Qu.:10034                                                           \n Max.   :12345                                                           \n NA's   :1                                                               \n Cross.Street.2     Intersection.Street.1 Intersection.Street.2\n Length:425248      Length:425248         Length:425248        \n Class :character   Class :character      Class :character     \n Mode  :character   Mode  :character      Mode  :character     \n                                                               \n                                                               \n                                                               \n                                                               \n Address.Type           City             Landmark         Facility.Type     \n Length:425248      Length:425248      Length:425248      Length:425248     \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n                                                                            \n    Status          Due.Date       Resolution.Description\n Length:425248      Mode:logical   Length:425248         \n Class :character   NA's:425248    Class :character      \n Mode  :character                  Mode  :character      \n                                                         \n                                                         \n                                                         \n                                                         \n Resolution.Action.Updated.Date Community.Board         BBL           \n Length:425248                  Length:425248      Min.   :0.000e+00  \n Class :character               Class :character   1st Qu.:1.012e+09  \n Mode  :character               Mode  :character   Median :1.019e+09  \n                                                   Mean   :1.016e+09  \n                                                   3rd Qu.:1.021e+09  \n                                                   Max.   :1.240e+09  \n                                                   NA's   :2302       \n   Borough          X.Coordinate..State.Plane. Y.Coordinate..State.Plane.\n Length:425248      Length:425248              Length:425248             \n Class :character   Class :character           Class :character          \n Mode  :character   Mode  :character           Mode  :character          \n                                                                         \n                                                                         \n                                                                         \n                                                                         \n Open.Data.Channel.Type Park.Facility.Name Park.Borough       Vehicle.Type  \n Length:425248          Length:425248      Length:425248      Mode:logical  \n Class :character       Class :character   Class :character   NA's:425248   \n Mode  :character       Mode  :character   Mode  :character                 \n                                                                            \n                                                                            \n                                                                            \n                                                                            \n Taxi.Company.Borough Taxi.Pick.Up.Location Bridge.Highway.Name\n Mode:logical         Mode:logical          Mode:logical       \n NA's:425248          NA's:425248           NA's:425248        \n                                                               \n                                                               \n                                                               \n                                                               \n                                                               \n Bridge.Highway.Direction Road.Ramp      Bridge.Highway.Segment    Latitude    \n Mode:logical             Mode:logical   Mode:logical           Min.   :40.69  \n NA's:425248              NA's:425248    NA's:425248            1st Qu.:40.77  \n                                                                Median :40.81  \n                                                                Mean   :40.80  \n                                                                3rd Qu.:40.83  \n                                                                Max.   :40.88  \n                                                                               \n   Longitude        Location         CreatedDate       \n Min.   :-74.02   Length:425248      Length:425248     \n 1st Qu.:-73.97   Class :character   Class :character  \n Median :-73.95   Mode  :character   Mode  :character  \n Mean   :-73.96                                        \n 3rd Qu.:-73.94                                        \n Max.   :-73.91",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#checking-key-distributions",
    "href": "project_code_final.html#checking-key-distributions",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.4 Checking Key distributions",
    "text": "3.4 Checking Key distributions\n\n\nCode\n# ========== KEY DISTRIBUTIONS ==========\n\n# Use tidyverse counting (no data.table .N)\n\nhousing_copy &lt;- housing_raw\nsr311_copy &lt;- sr311_raw\n\n# Housing Violations - Top 10 Current Status (showing top 10 since there are many unique values)\n\nhousing_copy |&gt;\n  filter(!is.na(CurrentStatus)) |&gt;\n    count(CurrentStatus, sort = TRUE) |&gt;\n      slice_head(n = 10) |&gt;\n        print()\n\n\n                              CurrentStatus      n\n1                       VIOLATION DISMISSED 197906\n2                          VIOLATION CLOSED 180829\n3                              NOV SENT OUT 112090\n4  FIRST NO ACCESS TO RE- INSPECT VIOLATION  18629\n5                         NOT COMPLIED WITH  17976\n6                         INFO NOV SENT OUT  12927\n7         NOTICE OF ISSUANCE SENT TO TENANT  11160\n8             VIOLATION WILL BE REINSPECTED  10263\n9                              CIV14 MAILED   7244\n10                     DEFECT LETTER ISSUED   5934\n\n\nCode\n# 311 Complaints - Top 10 Complaint Types (showing top 10)\n\nsr311_copy |&gt;\n  filter(!is.na(Complaint.Type)) |&gt;\n    count(Complaint.Type, sort = TRUE) |&gt;\n      slice_head(n = 10) |&gt;\n        print()\n\n\n                  Complaint.Type      n\n1                 HEAT/HOT WATER 229222\n2                       PLUMBING  50637\n3                  PAINT/PLASTER  44624\n4                     WATER LEAK  30190\n5  General Construction/Plumbing  25207\n6        Maintenance or Facility  20202\n7                       Elevator  16588\n8                       Plumbing   2197\n9                       ELEVATOR   1302\n10          Non-Residential Heat   1094\n\n\nCode\n# 311 Complaints - Status distribution\n\nsr311_copy |&gt;\n  filter(!is.na(Status)) |&gt;\n    count(Status, sort = TRUE) |&gt;\n      print()\n\n\n       Status      n\n1      Closed 419047\n2        Open   5152\n3 In Progress    922\n4    Assigned    124\n5 Unspecified      3\n\n\nCode\n# 311 Complaints - Top Agencies\n\nsr311_copy |&gt;\n  filter(!is.na(Agency)) |&gt;\n    count(Agency, sort = TRUE) |&gt;\n      slice_head(n = 10) |&gt;\n        print()\n\n\n  Agency      n\n1    HPD 358603\n2    DOB  43687\n3    DPR  20202\n4  DOHMH   1579\n5    DOE   1064\n6    DEP     99\n7    DOT     14",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#formatting-dates-and-making-sure-loaded-data-has-only-manhattan-borough-entries",
    "href": "project_code_final.html#formatting-dates-and-making-sure-loaded-data-has-only-manhattan-borough-entries",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.5 Formatting dates and making sure loaded data has only Manhattan Borough entries",
    "text": "3.5 Formatting dates and making sure loaded data has only Manhattan Borough entries\nHere, we created a robust set of parse orders for mixed formats in both our datasets. We created cleaned date columns while keep original columns untouched. Also, we added new columns with month-year (Month name + Year) extracted which will be used for alluvial stacks later on\n\n\nCode\n# VALID DATE ORDERS\n\ndate_orders &lt;- c(\"mdY HMS\", \"mdY HM\", \"mdY\", \"Ymd HMS\", \"Ymd\")\n\nhousing &lt;- housing_raw |&gt;\n  mutate(\n    borough_std = toupper(Borough),\n    # PARSE master versions — keep duplicates untouched\n    inspectiondate_clean = parse_date_time(InspectionDate, orders = date_orders),\n    approveddate_clean   = parse_date_time(ApprovedDate, orders = date_orders),\n    certifieddate_clean  = parse_date_time(CertifiedDate, orders = date_orders),\n    novissued_clean      = parse_date_time(NOVIssuedDate, orders = date_orders),\n    statusdate_clean     = parse_date_time(CurrentStatusDate, orders = date_orders),\n    originalcertifybydate_clean = parse_date_time(OriginalCertifyByDate, orders = date_orders),\n    originalcorrectbydate_clean = parse_date_time(OriginalCorrectByDate, orders = date_orders),\n    newcertifybydate_clean = parse_date_time(NewCertifyByDate, orders = date_orders),\n    newcorrectbydate_cean = parse_date_time(NewCorrectByDate, orders = date_orders),\n  ) |&gt;\n  filter(borough_std == \"MANHATTAN\")\n\nsr311 &lt;- sr311_raw |&gt;\n  mutate(\n    borough_std = toupper(Borough),\n    created_clean = parse_date_time(Created.Date, orders = date_orders),\n    closed_clean  = parse_date_time(Closed.Date, orders = date_orders)\n  ) |&gt;\n  filter(borough_std == \"MANHATTAN\")\n\n\n# adding month-year (Month name + Year) columns used for alluvial stacks\n\nhousing &lt;- housing |&gt;\n  mutate(\n    inspection_month = ifelse(!is.na(inspectiondate_clean),\n                              format(floor_date(inspectiondate_clean, \"month\"), \"%B %Y\"),\n                              NA_character_),\n    approved_month = ifelse(!is.na(approveddate_clean), \n                            format(floor_date(approveddate_clean,\"month\"), \"%B %Y\"),\n                            NA_character_),\n    nov_month = ifelse(!is.na(novissued_clean),\n                       format(floor_date(novissued_clean, \"month\"), \"%B %Y\"),\n                       NA_character_),\n    status_month = ifelse(!is.na(statusdate_clean),\n                          format(floor_date(statusdate_clean, \"month\"), \"%B %Y\"),\n                          NA_character_)\n  )\n\nsr311 &lt;- sr311 |&gt;\n  mutate(\n    created_month = ifelse(!is.na(created_clean),\n                           format(floor_date(created_clean, \"month\"), \"%B %Y\"),\n                           NA_character_),\n    closed_month = ifelse(!is.na(closed_clean),\n                           format(floor_date(closed_clean, \"month\"), \"%B %Y\"),\n                           NA_character_)\n)\n\ncat(\"Final Housing rows:\", nrow(housing), \"\\n\")\n\n\nFinal Housing rows: 589005 \n\n\nCode\ncat(\"Final 311 rows:\", nrow(sr311), \"\\n\")\n\n\nFinal 311 rows: 425248 \n\n\nThe date columns have been parsed properly and as we can see the both raw data we downloaded, only had data from the Manhattan borough since before and after filtering the number of rows remain same for both datastes i.e. 589005 rows in Housing Violations dataset and 425248 rows in 311 requests dataset.\n\n3.5.1 Checking 10 rows of data with new date columns included\n\n\nCode\nhead(housing,10)\n\n\n   ViolationID BuildingID RegistrationID BoroID   Borough HouseNumber\n1     15004789     805012         100420      1 MANHATTAN     144REAR\n2     14817075       9458         104092      1 MANHATTAN           1\n3     14831546      40441         118126      1 MANHATTAN         158\n4     15313781      18016         120064      1 MANHATTAN         314\n5     14838558       8157         118733      1 MANHATTAN        3885\n6     14914309      43369         111345      1 MANHATTAN         502\n7     15349038      38326         107467      1 MANHATTAN         143\n8     15097146      42830         105422      1 MANHATTAN         542\n9     15097147      42830         105422      1 MANHATTAN         542\n10    15099194       3423         125427      1 MANHATTAN         201\n   LowHouseNumber HighHouseNumber         StreetName StreetCode Postcode\n1         144rear        146 REAR      LUDLOW STREET      25090    10002\n2               1               7 CHRISTOPHER STREET      15210    10014\n3             158             158    WEST 132 STREET      36410    10027\n4             314             314     EAST 89 STREET      18770    10128\n5            3885            3897           BROADWAY      13610    10032\n6             502             502    WEST 180 STREET      37350    10033\n7             143             145    WEST 116 STREET      36090    10026\n8             542             544    WEST 159 STREET      36950    10032\n9             542             544    WEST 159 STREET      36950    10032\n10            201             201    WEST 120 STREET      10610    10027\n   Apartment Story Block Lot Class InspectionDate ApprovedDate\n1               NA   411  45     A     2022-03-08   03/08/2022\n2         9C     9   610  60     A     2022-02-10   02/10/2022\n3         3N     3  1916  55     B     2022-02-11   02/11/2022\n4                0  1551  43     C     2022-08-16   08/17/2022\n5        20B     2  2137  80     B     2022-02-14   02/15/2022\n6          7     3  2152  45     B     2022-02-23   02/24/2022\n7         2A     2  1901   9     B     2022-08-30   08/31/2022\n8         5C     5  2117  14     B     2022-04-09   04/09/2022\n9         5C     5  2117  14     B     2022-04-09   04/09/2022\n10        1A     1  1926  29     B     2022-04-12   04/12/2022\n   OriginalCertifyByDate OriginalCorrectByDate NewCertifyByDate\n1             06/25/2022            06/11/2022                 \n2             05/31/2022            05/17/2022                 \n3             04/04/2022            03/21/2022                 \n4             09/06/2022            09/01/2022                 \n5             04/06/2022            03/23/2022                 \n6             04/15/2022            04/01/2022                 \n7             10/20/2022            10/06/2022                 \n8             05/30/2022            05/16/2022                 \n9             05/30/2022            05/16/2022                 \n10            06/01/2022            05/18/2022                 \n   NewCorrectByDate CertifiedDate OrderNumber   NOVID\n1                                        1507 7793231\n2                                         554 7636476\n3                                         579 7638268\n4                      12/05/2022         530 8007840\n5                      03/18/2022         579 7651705\n6                      03/18/2022        1503 7724697\n7                      09/30/2022         702 8023066\n8                      05/30/2022        1503 7870389\n9                      05/30/2022         702 7870389\n10                     05/30/2022         508 7873344\n                                                                                                                                                                                                                           NOVDescription\n1                                   (A) § HMC:FILE ANNUAL BEDBUG REPORT IN ACCORDANCE WITH HPD RULE AS DESCRIBED ON THE BACK OF THIS NOTICE OF VIOLATION OR AS DESCRIBED ON HPDâ\\u0080\\u0099S WEBSITE, WWW.NYC.GOV\\\\HPD, SEARCH BED BUGS.\n2                                                             § 27-2005 ADM CODE PAINT METAL IN ACCORDANCE WITH DEPT. REGULATION RADIATOR AT THE SOUTH WALL IN THE KITCHEN LOCATED AT APT 9C, 9th STORY, 3rd APARTMENT FROM EAST AT SOUTH\n3                                                                                  § 27-2026 ADM CODE REPAIR THE LEAKY AND/OR DEFECTIVE FAUCETS AT SINK IN THE KITCHENETTE LOCATED AT B-ROOM 3N, 3rd STORY, 1st B-ROOM FROM NORTH AT EAST\n4                                                                                                                    § 27-2005, 27-2007, 27-2041.1 HMC: REPLACE OR REPAIR THE SELF-CLOSING DOORS THAT IS MISSING OR DEFECTIVE AT BULKHEAD\n5                                                                               § 27-2026 ADM CODE REPAIR THE LEAKY AND/OR DEFECTIVE FAUCETS AT WASHBASIN IN THE BATHROOM LOCATED AT APT 20B, 2nd STORY, 1st APARTMENT FROM NORTH AT EAST\n6                                                               § 27-2046.1 HMC: REPAIR OR REPLACE THE CARBON MONOXIDE DETECTING DEVICE(S). MISSING IN THE ENTIRE APARTMENT LOCATED AT APT 7, 3rd STORY, 1st APARTMENT FROM EAST AT SOUTH\n7                                                                                                          § 27-2045 ADM CODE REPAIR OR REPLACE THE SMOKE DETECTOR MISSING LOCATED AT APT 2A, 2nd STORY, 1st APARTMENT FROM WEST AT NORTH\n8                                                              § 27-2046.1 HMC: REPAIR OR REPLACE THE CARBON MONOXIDE DETECTING DEVICE(S). MISSING IN THE ENTIRE APARTMENT LOCATED AT APT 5C, 5th STORY, 1st APARTMENT FROM WEST AT NORTH\n9                                                                                  § 27-2045 ADM CODE REPAIR OR REPLACE THE SMOKE DETECTOR MISSING IN THE ENTIRE APARTMENT LOCATED AT APT 5C, 5th STORY, 1st APARTMENT FROM WEST AT NORTH\n10 § 27-2005 ADM CODE REPAIR THE BROKEN OR DEFECTIVE PLASTERED SURFACES AND PAINT IN A UNIFORM COLOR EAST WALL APPROX 4SQ FT AND NORTH WALL APPROX 4 SQ FT IN THE BATHROOM LOCATED AT APT 1A, 1st STORY, 2nd APARTMENT FROM SOUTH AT WEST\n   NOVIssuedDate CurrentStatusID       CurrentStatus CurrentStatusDate  NovType\n1     03/08/2022               9 VIOLATION DISMISSED        03/23/2022 Original\n2     02/11/2022              19    VIOLATION CLOSED        03/06/2024 Original\n3     02/14/2022               2        NOV SENT OUT        02/14/2022 Original\n4     08/18/2022              19    VIOLATION CLOSED        06/29/2023 Original\n5     02/16/2022               9 VIOLATION DISMISSED        05/31/2022 Original\n6     02/25/2022               9 VIOLATION DISMISSED        05/31/2022 Original\n7     09/01/2022               9 VIOLATION DISMISSED        12/12/2022 Original\n8     04/11/2022              19    VIOLATION CLOSED        07/03/2022 Original\n9     04/11/2022              19    VIOLATION CLOSED        07/03/2022 Original\n10    04/13/2022               9 VIOLATION DISMISSED        08/10/2022 Original\n   ViolationStatus RentImpairing Latitude Longitude CommunityBoard\n1            Close             N       NA        NA             NA\n2            Close             N 40.73407 -73.99976              2\n3             Open             N 40.81285 -73.94384             10\n4            Close             N 40.77955 -73.94975              8\n5            Close             N 40.83741 -73.94244             12\n6            Close             N 40.84754 -73.93169             12\n7            Close             N 40.80257 -73.95095             10\n8            Close             N 40.83461 -73.94233             12\n9            Close             N 40.83461 -73.94233             12\n10           Close             N 40.80592 -73.95095             10\n   CouncilDistrict CensusTract     BIN        BBL                        NTA\n1               NA          NA      NA         NA                           \n2                3          71 1010692 1006100060               West Village\n3                9         226 1058117 1019160055             Harlem (North)\n4                5       14602 1050093 1015510043  Upper East Side-Yorkville\n5                7         245 1063363 1021370080 Washington Heights (South)\n6               10         261 1063601 1021520045 Washington Heights (South)\n7                9         218 1057394 1019010009             Harlem (South)\n8                7         245 1062750 1021170014 Washington Heights (South)\n9                7         245 1062750 1021170014 Washington Heights (South)\n10               9         220 1079501 1019260029             Harlem (South)\n   borough_std inspectiondate_clean approveddate_clean certifieddate_clean\n1    MANHATTAN           2022-03-08         2022-03-08                &lt;NA&gt;\n2    MANHATTAN           2022-02-10         2022-02-10                &lt;NA&gt;\n3    MANHATTAN           2022-02-11         2022-02-11                &lt;NA&gt;\n4    MANHATTAN           2022-08-16         2022-08-17          2022-12-05\n5    MANHATTAN           2022-02-14         2022-02-15          2022-03-18\n6    MANHATTAN           2022-02-23         2022-02-24          2022-03-18\n7    MANHATTAN           2022-08-30         2022-08-31          2022-09-30\n8    MANHATTAN           2022-04-09         2022-04-09          2022-05-30\n9    MANHATTAN           2022-04-09         2022-04-09          2022-05-30\n10   MANHATTAN           2022-04-12         2022-04-12          2022-05-30\n   novissued_clean statusdate_clean originalcertifybydate_clean\n1       2022-03-08       2022-03-23                  2022-06-25\n2       2022-02-11       2024-03-06                  2022-05-31\n3       2022-02-14       2022-02-14                  2022-04-04\n4       2022-08-18       2023-06-29                  2022-09-06\n5       2022-02-16       2022-05-31                  2022-04-06\n6       2022-02-25       2022-05-31                  2022-04-15\n7       2022-09-01       2022-12-12                  2022-10-20\n8       2022-04-11       2022-07-03                  2022-05-30\n9       2022-04-11       2022-07-03                  2022-05-30\n10      2022-04-13       2022-08-10                  2022-06-01\n   originalcorrectbydate_clean newcertifybydate_clean newcorrectbydate_cean\n1                   2022-06-11                   &lt;NA&gt;                  &lt;NA&gt;\n2                   2022-05-17                   &lt;NA&gt;                  &lt;NA&gt;\n3                   2022-03-21                   &lt;NA&gt;                  &lt;NA&gt;\n4                   2022-09-01                   &lt;NA&gt;                  &lt;NA&gt;\n5                   2022-03-23                   &lt;NA&gt;                  &lt;NA&gt;\n6                   2022-04-01                   &lt;NA&gt;                  &lt;NA&gt;\n7                   2022-10-06                   &lt;NA&gt;                  &lt;NA&gt;\n8                   2022-05-16                   &lt;NA&gt;                  &lt;NA&gt;\n9                   2022-05-16                   &lt;NA&gt;                  &lt;NA&gt;\n10                  2022-05-18                   &lt;NA&gt;                  &lt;NA&gt;\n   inspection_month approved_month      nov_month  status_month\n1        March 2022     March 2022     March 2022    March 2022\n2     February 2022  February 2022  February 2022    March 2024\n3     February 2022  February 2022  February 2022 February 2022\n4       August 2022    August 2022    August 2022     June 2023\n5     February 2022  February 2022  February 2022      May 2022\n6     February 2022  February 2022  February 2022      May 2022\n7       August 2022    August 2022 September 2022 December 2022\n8        April 2022     April 2022     April 2022     July 2022\n9        April 2022     April 2022     April 2022     July 2022\n10       April 2022     April 2022     April 2022   August 2022\n\n\n\n\nCode\nhead(sr311,10)\n\n\n   Unique.Key           Created.Date Closed.Date Agency\n1    66934900 11/23/2025 11:58:19 PM                HPD\n2    66932786 11/23/2025 11:55:32 PM                HPD\n3    66931601 11/23/2025 11:52:04 PM                HPD\n4    66929338 11/23/2025 11:51:49 PM                HPD\n5    66933739 11/23/2025 11:48:51 PM                HPD\n6    66929209 11/23/2025 11:42:51 PM                HPD\n7    66933740 11/23/2025 11:39:54 PM                HPD\n8    66931510 11/23/2025 11:39:46 PM                HPD\n9    66929270 11/23/2025 11:36:49 PM                HPD\n10   66931511 11/23/2025 11:34:10 PM                HPD\n                                          Agency.Name Complaint.Type\n1  Department of Housing Preservation and Development HEAT/HOT WATER\n2  Department of Housing Preservation and Development       PLUMBING\n3  Department of Housing Preservation and Development HEAT/HOT WATER\n4  Department of Housing Preservation and Development HEAT/HOT WATER\n5  Department of Housing Preservation and Development HEAT/HOT WATER\n6  Department of Housing Preservation and Development HEAT/HOT WATER\n7  Department of Housing Preservation and Development HEAT/HOT WATER\n8  Department of Housing Preservation and Development HEAT/HOT WATER\n9  Department of Housing Preservation and Development HEAT/HOT WATER\n10 Department of Housing Preservation and Development HEAT/HOT WATER\n        Descriptor        Location.Type Incident.Zip      Incident.Address\n1  ENTIRE BUILDING RESIDENTIAL BUILDING        10028  425 EAST   84 STREET\n2   BATHTUB/SHOWER RESIDENTIAL BUILDING        10040  121 FT GEORGE AVENUE\n3  ENTIRE BUILDING RESIDENTIAL BUILDING        10040  121 FT GEORGE AVENUE\n4  ENTIRE BUILDING RESIDENTIAL BUILDING        10028  425 EAST   84 STREET\n5  ENTIRE BUILDING RESIDENTIAL BUILDING        10025  242 WEST  109 STREET\n6   APARTMENT ONLY RESIDENTIAL BUILDING        10009           26 1 AVENUE\n7  ENTIRE BUILDING RESIDENTIAL BUILDING        10034  106 VERMILYEA AVENUE\n8  ENTIRE BUILDING RESIDENTIAL BUILDING        10024   20 WEST   86 STREET\n9  ENTIRE BUILDING RESIDENTIAL BUILDING        10031  547 WEST  147 STREET\n10 ENTIRE BUILDING RESIDENTIAL BUILDING        10032 2166 AMSTERDAM AVENUE\n        Street.Name Cross.Street.1 Cross.Street.2 Intersection.Street.1\n1  EAST   84 STREET                                                    \n2  FT GEORGE AVENUE                                                    \n3  FT GEORGE AVENUE                                                    \n4  EAST   84 STREET                                                    \n5  WEST  109 STREET                                                    \n6          1 AVENUE                                                    \n7  VERMILYEA AVENUE                                                    \n8  WEST   86 STREET                                                    \n9  WEST  147 STREET                                                    \n10 AMSTERDAM AVENUE                                                    \n   Intersection.Street.2 Address.Type     City Landmark Facility.Type Status\n1                             ADDRESS NEW YORK                          Open\n2                             ADDRESS NEW YORK                          Open\n3                             ADDRESS NEW YORK                          Open\n4                             ADDRESS NEW YORK                          Open\n5                             ADDRESS NEW YORK                          Open\n6                             ADDRESS NEW YORK                          Open\n7                             ADDRESS NEW YORK                          Open\n8                             ADDRESS NEW YORK                          Open\n9                             ADDRESS NEW YORK                          Open\n10                            ADDRESS NEW YORK                          Open\n   Due.Date\n1        NA\n2        NA\n3        NA\n4        NA\n5        NA\n6        NA\n7        NA\n8        NA\n9        NA\n10       NA\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Resolution.Description\n1  This complaint is a duplicate of a building-wide condition already reported by another tenant.  The original complaint is still open, and HPD may only need to confirm that the condition exists by inspecting one apartment.  If we cannot contact the tenant from the original complaint or get access to that apartment, HPD may attempt to contact the person who filed this complaint to verify the correction of the condition or may conduct an inspection of your unit. You can check HPDONLINE to see if a\n2                                                                                                                                                          The following complaint conditions are still open. HPD has already attempted to notify the property owner that the condition exists; the tenant should provide access for the owner to make the repair.  HPD may attempt to contact the tenant by phone to verify the correction of the condition or an HPD Inspector may attempt to conduct an inspection.\n3  This complaint is a duplicate of a building-wide condition already reported by another tenant.  The original complaint is still open, and HPD may only need to confirm that the condition exists by inspecting one apartment.  If we cannot contact the tenant from the original complaint or get access to that apartment, HPD may attempt to contact the person who filed this complaint to verify the correction of the condition or may conduct an inspection of your unit. You can check HPDONLINE to see if a\n4                                                                                                                                                          The following complaint conditions are still open. HPD has already attempted to notify the property owner that the condition exists; the tenant should provide access for the owner to make the repair.  HPD may attempt to contact the tenant by phone to verify the correction of the condition or an HPD Inspector may attempt to conduct an inspection.\n5  This complaint is a duplicate of a building-wide condition already reported by another tenant.  The original complaint is still open, and HPD may only need to confirm that the condition exists by inspecting one apartment.  If we cannot contact the tenant from the original complaint or get access to that apartment, HPD may attempt to contact the person who filed this complaint to verify the correction of the condition or may conduct an inspection of your unit. You can check HPDONLINE to see if a\n6                                                                                                                                                          The following complaint conditions are still open. HPD has already attempted to notify the property owner that the condition exists; the tenant should provide access for the owner to make the repair.  HPD may attempt to contact the tenant by phone to verify the correction of the condition or an HPD Inspector may attempt to conduct an inspection.\n7                                                                                                                                                          The following complaint conditions are still open. HPD has already attempted to notify the property owner that the condition exists; the tenant should provide access for the owner to make the repair.  HPD may attempt to contact the tenant by phone to verify the correction of the condition or an HPD Inspector may attempt to conduct an inspection.\n8  This complaint is a duplicate of a building-wide condition already reported by another tenant.  The original complaint is still open, and HPD may only need to confirm that the condition exists by inspecting one apartment.  If we cannot contact the tenant from the original complaint or get access to that apartment, HPD may attempt to contact the person who filed this complaint to verify the correction of the condition or may conduct an inspection of your unit. You can check HPDONLINE to see if a\n9  This complaint is a duplicate of a building-wide condition already reported by another tenant.  The original complaint is still open, and HPD may only need to confirm that the condition exists by inspecting one apartment.  If we cannot contact the tenant from the original complaint or get access to that apartment, HPD may attempt to contact the person who filed this complaint to verify the correction of the condition or may conduct an inspection of your unit. You can check HPDONLINE to see if a\n10                                                                                                                                                         The following complaint conditions are still open. HPD has already attempted to notify the property owner that the condition exists; the tenant should provide access for the owner to make the repair.  HPD may attempt to contact the tenant by phone to verify the correction of the condition or an HPD Inspector may attempt to conduct an inspection.\n   Resolution.Action.Updated.Date Community.Board        BBL   Borough\n1          11/23/2025 12:00:00 AM    08 MANHATTAN 1015640012 MANHATTAN\n2          11/23/2025 12:00:00 AM    12 MANHATTAN 1021490265 MANHATTAN\n3          11/23/2025 12:00:00 AM    12 MANHATTAN 1021490265 MANHATTAN\n4          11/23/2025 12:00:00 AM    08 MANHATTAN 1015640012 MANHATTAN\n5          11/23/2025 12:00:00 AM    07 MANHATTAN 1018800053 MANHATTAN\n6          11/23/2025 12:00:00 AM    03 MANHATTAN 1004290009 MANHATTAN\n7          11/23/2025 12:00:00 AM    12 MANHATTAN 1022350035 MANHATTAN\n8          11/23/2025 12:00:00 AM    07 MANHATTAN 1011990045 MANHATTAN\n9          11/23/2025 12:00:00 AM    09 MANHATTAN 1020790007 MANHATTAN\n10         11/23/2025 12:00:00 AM    12 MANHATTAN 1021230100 MANHATTAN\n   X.Coordinate..State.Plane. Y.Coordinate..State.Plane. Open.Data.Channel.Type\n1                     998,207                    221,730                 ONLINE\n2                   1,004,446                    251,683                  PHONE\n3                   1,004,446                    251,683                  PHONE\n4                     998,207                    221,730                 ONLINE\n5                     993,732                    231,824                  PHONE\n6                     987,565                    202,976                  PHONE\n7                   1,005,840                    254,895                  PHONE\n8                     992,387                    225,574                 MOBILE\n9                     998,651                    240,613                  PHONE\n10                  1,001,609                    245,101                 ONLINE\n   Park.Facility.Name Park.Borough Vehicle.Type Taxi.Company.Borough\n1         Unspecified    MANHATTAN           NA                   NA\n2         Unspecified    MANHATTAN           NA                   NA\n3         Unspecified    MANHATTAN           NA                   NA\n4         Unspecified    MANHATTAN           NA                   NA\n5         Unspecified    MANHATTAN           NA                   NA\n6         Unspecified    MANHATTAN           NA                   NA\n7         Unspecified    MANHATTAN           NA                   NA\n8         Unspecified    MANHATTAN           NA                   NA\n9         Unspecified    MANHATTAN           NA                   NA\n10        Unspecified    MANHATTAN           NA                   NA\n   Taxi.Pick.Up.Location Bridge.Highway.Name Bridge.Highway.Direction Road.Ramp\n1                     NA                  NA                       NA        NA\n2                     NA                  NA                       NA        NA\n3                     NA                  NA                       NA        NA\n4                     NA                  NA                       NA        NA\n5                     NA                  NA                       NA        NA\n6                     NA                  NA                       NA        NA\n7                     NA                  NA                       NA        NA\n8                     NA                  NA                       NA        NA\n9                     NA                  NA                       NA        NA\n10                    NA                  NA                       NA        NA\n   Bridge.Highway.Segment Latitude Longitude\n1                      NA 40.77526 -73.94961\n2                      NA 40.85746 -73.92699\n3                      NA 40.85746 -73.92699\n4                      NA 40.77526 -73.94961\n5                      NA 40.80297 -73.96575\n6                      NA 40.72380 -73.98804\n7                      NA 40.86628 -73.92194\n8                      NA 40.78582 -73.97062\n9                      NA 40.82709 -73.94796\n10                     NA 40.83940 -73.93726\n                                   Location CreatedDate borough_std\n1   (40.77526292188198, -73.94960785720805)  2025-11-23   MANHATTAN\n2   (40.85746342279737, -73.92699164532567)  2025-11-23   MANHATTAN\n3   (40.85746342279737, -73.92699164532567)  2025-11-23   MANHATTAN\n4   (40.77526292188198, -73.94960785720805)  2025-11-23   MANHATTAN\n5   (40.80297417373674, -73.96575071974307)  2025-11-23   MANHATTAN\n6   (40.72379831989205, -73.98804034230925)  2025-11-23   MANHATTAN\n7   (40.86627609160888, -73.92194200381317)  2025-11-23   MANHATTAN\n8   (40.78582095720245, -73.97061647397211)  2025-11-23   MANHATTAN\n9     (40.827090867999, -73.94796428323792)  2025-11-23   MANHATTAN\n10 (40.839403814099306, -73.93726441124402)  2025-11-23   MANHATTAN\n         created_clean closed_clean created_month closed_month\n1  2025-11-23 11:58:19         &lt;NA&gt; November 2025         &lt;NA&gt;\n2  2025-11-23 11:55:32         &lt;NA&gt; November 2025         &lt;NA&gt;\n3  2025-11-23 11:52:04         &lt;NA&gt; November 2025         &lt;NA&gt;\n4  2025-11-23 11:51:49         &lt;NA&gt; November 2025         &lt;NA&gt;\n5  2025-11-23 11:48:51         &lt;NA&gt; November 2025         &lt;NA&gt;\n6  2025-11-23 11:42:51         &lt;NA&gt; November 2025         &lt;NA&gt;\n7  2025-11-23 11:39:54         &lt;NA&gt; November 2025         &lt;NA&gt;\n8  2025-11-23 11:39:46         &lt;NA&gt; November 2025         &lt;NA&gt;\n9  2025-11-23 11:36:49         &lt;NA&gt; November 2025         &lt;NA&gt;\n10 2025-11-23 11:34:10         &lt;NA&gt; November 2025         &lt;NA&gt;",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#housing-violation-decription-column-data-cleaning",
    "href": "project_code_final.html#housing-violation-decription-column-data-cleaning",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.6 Housing violation decription column data cleaning",
    "text": "3.6 Housing violation decription column data cleaning\n\n\nCode\n## Housing violation description column data cleaning\n\n# First, let's inspect NOVDescription\nhead(housing$NOVDescription, 10)\n\n\n [1] \"(A) § HMC:FILE ANNUAL BEDBUG REPORT IN ACCORDANCE WITH HPD RULE AS DESCRIBED ON THE BACK OF THIS NOTICE OF VIOLATION OR AS DESCRIBED ON HPDâ\\u0080\\u0099S WEBSITE, WWW.NYC.GOV\\\\HPD, SEARCH BED BUGS.\"                                 \n [2] \"§ 27-2005 ADM CODE PAINT METAL IN ACCORDANCE WITH DEPT. REGULATION RADIATOR AT THE SOUTH WALL IN THE KITCHEN LOCATED AT APT 9C, 9th STORY, 3rd APARTMENT FROM EAST AT SOUTH\"                                                           \n [3] \"§ 27-2026 ADM CODE REPAIR THE LEAKY AND/OR DEFECTIVE FAUCETS AT SINK IN THE KITCHENETTE LOCATED AT B-ROOM 3N, 3rd STORY, 1st B-ROOM FROM NORTH AT EAST\"                                                                                \n [4] \"§ 27-2005, 27-2007, 27-2041.1 HMC: REPLACE OR REPAIR THE SELF-CLOSING DOORS THAT IS MISSING OR DEFECTIVE AT BULKHEAD\"                                                                                                                  \n [5] \"§ 27-2026 ADM CODE REPAIR THE LEAKY AND/OR DEFECTIVE FAUCETS AT WASHBASIN IN THE BATHROOM LOCATED AT APT 20B, 2nd STORY, 1st APARTMENT FROM NORTH AT EAST\"                                                                             \n [6] \"§ 27-2046.1 HMC: REPAIR OR REPLACE THE CARBON MONOXIDE DETECTING DEVICE(S). MISSING IN THE ENTIRE APARTMENT LOCATED AT APT 7, 3rd STORY, 1st APARTMENT FROM EAST AT SOUTH\"                                                             \n [7] \"§ 27-2045 ADM CODE REPAIR OR REPLACE THE SMOKE DETECTOR MISSING LOCATED AT APT 2A, 2nd STORY, 1st APARTMENT FROM WEST AT NORTH\"                                                                                                        \n [8] \"§ 27-2046.1 HMC: REPAIR OR REPLACE THE CARBON MONOXIDE DETECTING DEVICE(S). MISSING IN THE ENTIRE APARTMENT LOCATED AT APT 5C, 5th STORY, 1st APARTMENT FROM WEST AT NORTH\"                                                            \n [9] \"§ 27-2045 ADM CODE REPAIR OR REPLACE THE SMOKE DETECTOR MISSING IN THE ENTIRE APARTMENT LOCATED AT APT 5C, 5th STORY, 1st APARTMENT FROM WEST AT NORTH\"                                                                                \n[10] \"§ 27-2005 ADM CODE REPAIR THE BROKEN OR DEFECTIVE PLASTERED SURFACES AND PAINT IN A UNIFORM COLOR EAST WALL APPROX 4SQ FT AND NORTH WALL APPROX 4 SQ FT IN THE BATHROOM LOCATED AT APT 1A, 1st STORY, 2nd APARTMENT FROM SOUTH AT WEST\"\n\n\nCode\n# ========== REFINED CATEGORIZATION ==========\n\nhousing &lt;- housing |&gt;\n  mutate(\n    ViolationCategory = case_when(\n\n      # 1 — Registration (Class I)\n      Class == \"I\" |\n        str_detect(NOVDescription, regex(\"registration|register\", ignore_case = TRUE)) ~\n        \"REGISTRATION/ADMIN\",\n\n      # 2 — Smoke / CO\n      str_detect(NOVDescription, regex(\"smoke detector|carbon monoxide|co detect\", ignore_case = TRUE)) ~\n        \"SMOKE/CO DETECTOR\",\n\n      # 3 — Heat / Hot Water\n      str_detect(NOVDescription, regex(\"heat|heating|hot water|radiator|boiler|steam|too cold\", ignore_case = TRUE)) ~\n        \"HEAT/HOT WATER\",\n\n      # 4 — Plumbing\n      str_detect(NOVDescription, regex(\"plumb|pipe|faucet|drain|sewer|bathroom|sink|toilet|water supply\", ignore_case = TRUE)) ~\n        \"PLUMBING\",\n\n      # 5 — Water leak\n      str_detect(NOVDescription, regex(\"leak|leaking|leakage|water drip\", ignore_case = TRUE)) ~\n        \"WATER LEAK\",\n\n      # 6 — Paint / Plaster\n      str_detect(NOVDescription, regex(\"paint|plaster|peel|wall|ceiling\", ignore_case = TRUE)) ~\n        \"PAINT/PLASTER\",\n\n      # 7 — Door / Window / Lock\n      str_detect(NOVDescription, regex(\"door|window|lock|self-closing|entrance\", ignore_case = TRUE)) ~\n        \"DOOR/WINDOW/LOCK\",\n\n      # 8 — Pest / Sanitation\n      str_detect(NOVDescription, regex(\"rodent|pest|roach|mice|rat|garbage|infest|sanitation\", ignore_case = TRUE)) ~\n        \"PEST/SANITATION\",\n\n      # 9 — Floor / Ceiling\n      str_detect(NOVDescription, regex(\"floor|tile|carpet|wood floor|ceramic\", ignore_case = TRUE)) ~\n        \"FLOOR/CEILING\",\n\n      # 10 — Elevator\n      str_detect(NOVDescription, regex(\"elevator|lift\", ignore_case = TRUE)) ~\n        \"ELEVATOR\",\n\n      # 11 — Mold\n      str_detect(NOVDescription, regex(\"mold|mildew|moisture\", ignore_case = TRUE)) ~\n        \"MOLD\",\n\n      # 12 — Electrical\n      str_detect(NOVDescription, regex(\"electric|wiring|outlet|light|circuit\", ignore_case = TRUE))  ~ \"ELECTRICAL\",\n\n      # 13 — Gas / Appliances\n      str_detect(NOVDescription, regex(\"gas|appliance|stove\", ignore_case = TRUE)) ~\n        \"GAS/APPLIANCES\",\n\n      # 14 — Ventilation\n      str_detect(NOVDescription, regex(\"ventilat|airflow|exhaust fan\", ignore_case = TRUE)) ~\n        \"VENTILATION\",\n\n      # 15— Fire Safety\n      str_detect(NOVDescription, regex(\"fire|sprinkler|fire escape|extinguish\", ignore_case = TRUE)) ~\n        \"FIRE SAFETY\",\n\n      # 16— Intercom / Bell\n      str_detect(NOVDescription, regex(\"bell|buzzer|intercom\", ignore_case = TRUE)) ~\n        \"BUILDING SYSTEMS\",\n\n      # 17 — Building Management\n      str_detect(NOVDescription, regex(\"janitor|superintendent|building service|super\", ignore_case = TRUE)) ~\n        \"BUILDING MANAGEMENT\",\n\n      # Default\n      TRUE ~ \"OTHER\"\n    )\n  )\n\n# Check distribution of newly created categories\nhousing |&gt;\n  count(ViolationCategory, sort = TRUE) |&gt;\n  print()\n\n\n     ViolationCategory      n\n1        PAINT/PLASTER 127336\n2             PLUMBING  93154\n3     DOOR/WINDOW/LOCK  91860\n4                OTHER  53533\n5      PEST/SANITATION  50753\n6    SMOKE/CO DETECTOR  40227\n7       HEAT/HOT WATER  39990\n8   REGISTRATION/ADMIN  35133\n9           WATER LEAK  23370\n10       FLOOR/CEILING  19633\n11         FIRE SAFETY   7121\n12      GAS/APPLIANCES   4004\n13          ELECTRICAL   1607\n14    BUILDING SYSTEMS    679\n15 BUILDING MANAGEMENT    376\n16                MOLD    118\n17            ELEVATOR     81\n18         VENTILATION     30\n\n\n\n\nCode\n# ========== 311: CATEGORY MAPPING (parallel to housing) ==========\n\n# Compare with 311 Complaint Types\nsr311 |&gt;\n  count(Complaint.Type, sort = TRUE) |&gt;\n  print()\n\n\n                  Complaint.Type      n\n1                 HEAT/HOT WATER 229222\n2                       PLUMBING  50637\n3                  PAINT/PLASTER  44624\n4                     WATER LEAK  30190\n5  General Construction/Plumbing  25207\n6        Maintenance or Facility  20202\n7                       Elevator  16588\n8                       Plumbing   2197\n9                       ELEVATOR   1302\n10          Non-Residential Heat   1094\n11            School Maintenance   1064\n12              OUTSIDE BUILDING    857\n13                    Water Leak    556\n14                Heat/Hot Water    487\n15                 Paint/Plaster    404\n16                          Mold    402\n17  Building Drinking Water Tank     83\n18             Sewer Maintenance     68\n19             Water Maintenance     31\n20            Building Condition     19\n21             Unstable Building     14\n\n\nCode\n# Mapped categories\nsr311 &lt;- sr311 |&gt;\n  mutate(\n    Category = case_when(\n      # Heat / Hot Water\n      str_detect(`Complaint.Type`, regex(\"HEAT|HOT WATER\", ignore_case = TRUE)) ~ \"HEAT/HOT WATER\",\n      \n      # Plumbing\n      str_detect(`Complaint.Type`, regex(\"PLUMBING\", ignore_case = TRUE)) ~ \"PLUMBING\",\n      \n      # Water Leak\n      str_detect(`Complaint.Type`, regex(\"WATER LEAK\", ignore_case = TRUE)) ~ \"WATER LEAK\",\n      \n      # Elevator\n      str_detect(`Complaint.Type`, regex(\"ELEVATOR\", ignore_case = TRUE)) ~ \"ELEVATOR\",\n      \n      # Mold\n      str_detect(`Complaint.Type`, regex(\"MOLD\", ignore_case = TRUE)) ~ \"MOLD\",\n      \n      # PAINT / PLASTER — newly added\n      str_detect(`Complaint.Type`, regex(\"PAINT|PLASTER\", ignore_case = TRUE)) ~ \"PAINT/PLASTER\",\n      \n      # Pest / sanitation based on Complaint.Type AND Descriptor\n      (\n        str_detect(`Complaint.Type`, regex(\"MAINTENANCE|FACILITY\", ignore_case = TRUE)) &\n        str_detect(Descriptor, regex(\"rodent|rodents|mice|rats|mouse|rat|insect|pest\", ignore_case = TRUE))\n      ) ~ \"PEST/SANITATION\",\n      \n      # Fallback\n      TRUE ~ \"OTHER\"\n    )\n  )\n\n# New mapped categories\nsr311 |&gt;\n  count(Category, sort = TRUE) |&gt;\n  print()\n\n\n         Category      n\n1  HEAT/HOT WATER 230803\n2        PLUMBING  78041\n3   PAINT/PLASTER  45028\n4      WATER LEAK  30746\n5        ELEVATOR  17890\n6           OTHER  17784\n7 PEST/SANITATION   4554\n8            MOLD    402",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#save-cleaned-csv-copies-for-reproducibility",
    "href": "project_code_final.html#save-cleaned-csv-copies-for-reproducibility",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.7 Save cleaned CSV copies for reproducibility",
    "text": "3.7 Save cleaned CSV copies for reproducibility\n\n\nCode\nwrite.csv(housing, \"datasets/housing_manhattan_3years_clean.csv\", row.names = FALSE)\nwrite.csv(sr311,   \"datasets/sr311_manhattan_3years_clean.csv\", row.names = FALSE)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#category-comparison-housing-vs-311",
    "href": "project_code_final.html#category-comparison-housing-vs-311",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.8 CATEGORY COMPARISON: Housing vs 311",
    "text": "3.8 CATEGORY COMPARISON: Housing vs 311\n\n\nCode\ncomparison_categories &lt;- c(\n  \"HEAT/HOT WATER\", \"PLUMBING\", \"PAINT/PLASTER\",\n  \"WATER LEAK\", \"ELEVATOR\", \"MOLD\", \"PEST/SANITATION\"\n)\n\n# Violations count\nviol_comparison &lt;- housing |&gt;\n  filter(ViolationCategory %in% comparison_categories) |&gt;\n    group_by(ViolationCategory) |&gt;\n      summarise(Count = n(), .groups = \"drop\") |&gt;\n        mutate(\n          Category = ViolationCategory,\n          Source = \"Housing Violations\"\n        ) |&gt;\n          select(Category, Count, Source)\n\n# 311 count\ncomplaints_comparison &lt;- sr311 |&gt;\n  filter(Category %in% comparison_categories) |&gt;\n    group_by(Category) |&gt;\n      summarise(Count = n(), .groups = \"drop\") |&gt;\n        mutate(Source = \"311 Complaints\")\n\n# Combine both\ncombined &lt;- bind_rows(viol_comparison, complaints_comparison)\n\n# Plot\nggplot(combined, aes(x = reorder(Category, -Count), y = Count, fill = Source)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  geom_text(aes(label = scales::comma(Count)),\n            position = position_dodge(width = 0.9),\n            vjust = -0.5, size = 4) +\n  scale_fill_manual(values = c(\n    \"Housing Violations\" = \"purple\",\n    \"311 Complaints\"     = \"pink\"\n  )) +\n  scale_y_continuous(labels = scales::comma,\n                     expand = expansion(mult = c(0, 0.15))) +\n  labs(\n    title = \"Violations vs 311 Complaints by Category\",\n    subtitle = \"Manhattan, 2022–2025 — Comparable Categories Only\",\n    x = \"Category\",\n    y = \"Count\",\n    fill = \"Source\"\n  ) +\n  theme_minimal(base_size = 16) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    legend.position = \"top\"\n  )",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#missing-data-summary",
    "href": "project_code_final.html#missing-data-summary",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.9 Missing Data summary:",
    "text": "3.9 Missing Data summary:\n\n\nCode\n# === HOUSING VIOLATIONS ===\n\n# Calculate missing counts and percentages\nmissing_housing &lt;- housing |&gt;\n  summarise(across(everything(), ~ sum(is.na(.)))) |&gt;\n    pivot_longer(everything(), names_to = \"column\", values_to = \"missing_count\") |&gt;\n      mutate(total = nrow(housing), missing_pct = round(100 * missing_count / total, 2)) |&gt;\n        arrange(desc(missing_pct))\n\n\n# Top housing missing columns (sample)\nprint(head(missing_housing, 20))\n\n\n# A tibble: 20 × 4\n   column                      missing_count  total missing_pct\n   &lt;chr&gt;                               &lt;int&gt;  &lt;int&gt;       &lt;dbl&gt;\n 1 newcertifybydate_clean             585410 589005       99.4 \n 2 newcorrectbydate_cean              585410 589005       99.4 \n 3 certifieddate_clean                360194 589005       61.2 \n 4 Story                               77094 589005       13.1 \n 5 NOVID                               34593 589005        5.87\n 6 novissued_clean                     34593 589005        5.87\n 7 originalcertifybydate_clean         34593 589005        5.87\n 8 originalcorrectbydate_clean         34593 589005        5.87\n 9 nov_month                           34593 589005        5.87\n10 BIN                                   305 589005        0.05\n11 BBL                                   305 589005        0.05\n12 Postcode                              147 589005        0.02\n13 Latitude                               77 589005        0.01\n14 Longitude                              77 589005        0.01\n15 CommunityBoard                         77 589005        0.01\n16 CouncilDistrict                        77 589005        0.01\n17 CensusTract                            77 589005        0.01\n18 ViolationID                             0 589005        0   \n19 BuildingID                              0 589005        0   \n20 RegistrationID                          0 589005        0   \n\n\nCode\n# Columns with missing values more than 0%\nprint(filter(missing_housing, missing_pct &gt; 0))\n\n\n# A tibble: 17 × 4\n   column                      missing_count  total missing_pct\n   &lt;chr&gt;                               &lt;int&gt;  &lt;int&gt;       &lt;dbl&gt;\n 1 newcertifybydate_clean             585410 589005       99.4 \n 2 newcorrectbydate_cean              585410 589005       99.4 \n 3 certifieddate_clean                360194 589005       61.2 \n 4 Story                               77094 589005       13.1 \n 5 NOVID                               34593 589005        5.87\n 6 novissued_clean                     34593 589005        5.87\n 7 originalcertifybydate_clean         34593 589005        5.87\n 8 originalcorrectbydate_clean         34593 589005        5.87\n 9 nov_month                           34593 589005        5.87\n10 BIN                                   305 589005        0.05\n11 BBL                                   305 589005        0.05\n12 Postcode                              147 589005        0.02\n13 Latitude                               77 589005        0.01\n14 Longitude                              77 589005        0.01\n15 CommunityBoard                         77 589005        0.01\n16 CouncilDistrict                        77 589005        0.01\n17 CensusTract                            77 589005        0.01\n\n\nCode\n# Columns with missing values more than 50%\nprint(missing_housing[missing_housing$missing_pct &gt; 50, ])\n\n\n# A tibble: 3 × 4\n  column                 missing_count  total missing_pct\n  &lt;chr&gt;                          &lt;int&gt;  &lt;int&gt;       &lt;dbl&gt;\n1 newcertifybydate_clean        585410 589005        99.4\n2 newcorrectbydate_cean         585410 589005        99.4\n3 certifieddate_clean           360194 589005        61.2\n\n\nCode\n# === 311 COMPLAINTS ===\n\n# Calculate missing counts and percentages\nmissing_311 &lt;- sr311 |&gt;\n  summarise(across(everything(), ~ sum(is.na(.)))) |&gt;\n    pivot_longer(everything(), names_to = \"column\", values_to = \"missing_count\") |&gt;\n      mutate(total = nrow(sr311), missing_pct = round(100 * missing_count / total, 2)) |&gt;\n        arrange(desc(missing_pct))\n\n\n# Top 311 missing columns (sample)\nprint(head(missing_311, 20))\n\n\n# A tibble: 20 × 4\n   column                   missing_count  total missing_pct\n   &lt;chr&gt;                            &lt;int&gt;  &lt;int&gt;       &lt;dbl&gt;\n 1 Due.Date                        425248 425248      100   \n 2 Vehicle.Type                    425248 425248      100   \n 3 Taxi.Company.Borough            425248 425248      100   \n 4 Taxi.Pick.Up.Location           425248 425248      100   \n 5 Bridge.Highway.Name             425248 425248      100   \n 6 Bridge.Highway.Direction        425248 425248      100   \n 7 Road.Ramp                       425248 425248      100   \n 8 Bridge.Highway.Segment          425248 425248      100   \n 9 closed_clean                      5151 425248        1.21\n10 closed_month                      5151 425248        1.21\n11 BBL                               2302 425248        0.54\n12 Unique.Key                           0 425248        0   \n13 Created.Date                         0 425248        0   \n14 Closed.Date                          0 425248        0   \n15 Agency                               0 425248        0   \n16 Agency.Name                          0 425248        0   \n17 Complaint.Type                       0 425248        0   \n18 Descriptor                           0 425248        0   \n19 Location.Type                        0 425248        0   \n20 Incident.Zip                         1 425248        0   \n\n\nCode\n# Columns with &gt;0% missing\nprint(filter(missing_311, missing_pct &gt; 0))\n\n\n# A tibble: 11 × 4\n   column                   missing_count  total missing_pct\n   &lt;chr&gt;                            &lt;int&gt;  &lt;int&gt;       &lt;dbl&gt;\n 1 Due.Date                        425248 425248      100   \n 2 Vehicle.Type                    425248 425248      100   \n 3 Taxi.Company.Borough            425248 425248      100   \n 4 Taxi.Pick.Up.Location           425248 425248      100   \n 5 Bridge.Highway.Name             425248 425248      100   \n 6 Bridge.Highway.Direction        425248 425248      100   \n 7 Road.Ramp                       425248 425248      100   \n 8 Bridge.Highway.Segment          425248 425248      100   \n 9 closed_clean                      5151 425248        1.21\n10 closed_month                      5151 425248        1.21\n11 BBL                               2302 425248        0.54\n\n\nCode\n# Columns with &gt;50% missing\nprint(filter(missing_311, missing_pct &gt; 50))\n\n\n# A tibble: 8 × 4\n  column                   missing_count  total missing_pct\n  &lt;chr&gt;                            &lt;int&gt;  &lt;int&gt;       &lt;dbl&gt;\n1 Due.Date                        425248 425248         100\n2 Vehicle.Type                    425248 425248         100\n3 Taxi.Company.Borough            425248 425248         100\n4 Taxi.Pick.Up.Location           425248 425248         100\n5 Bridge.Highway.Name             425248 425248         100\n6 Bridge.Highway.Direction        425248 425248         100\n7 Road.Ramp                       425248 425248         100\n8 Bridge.Highway.Segment          425248 425248         100\n\n\nCode\n# Saving results for visualization\nwrite.csv(missing_housing, \"datasets/missing_values_violations.csv\", row.names = FALSE)\nwrite.csv(missing_311, \"datasets/missing_values_311.csv\", row.names = FALSE)\n\n\n\n3.9.1 Missing Value Analysis",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#missing-visualizations",
    "href": "project_code_final.html#missing-visualizations",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.10 Missing Visualizations",
    "text": "3.10 Missing Visualizations\n\n\nCode\n# --------- Visualizations: Missingness bar charts (tidy) ---------\n\n# Load the saved summaries (if needed) or use objects directly\n\nmissing_viol_plot &lt;- missing_housing |&gt; filter(missing_pct &gt; 0)\nmissing_311_plot  &lt;- missing_311 |&gt; filter(missing_pct &gt; 0)\n\n# ========== GRAPH 1: BAR CHART - HOUSING VIOLATIONS ==========\n\np1 &lt;- ggplot(missing_viol_plot, aes(x = reorder(column, missing_pct), y = missing_pct)) +\n  geom_bar(stat = \"identity\", fill = \"steelblue\") +\n  coord_flip() +\n  labs(\n  title = \"Missing Values in Housing Violations Dataset\",\n  subtitle = \"Manhattan, 2022-2025\",\n  x = \"Column Name\",\n  y = \"Percentage Missing (%)\"\n  ) +\n  theme_minimal(base_size = 14) +\n  theme(\n  plot.title = element_text(face = \"bold\", size = 16),\n  axis.text.y = element_text(size = 11)\n  )\n\nprint(p1)\n\n\n\n\n\n\n\n\n\nCode\n# ========== GRAPH 2: BAR CHART - 311 COMPLAINTS ==========\n\np2 &lt;- ggplot(missing_311_plot, aes(x = reorder(column, missing_pct), y = missing_pct)) +\n  geom_bar(stat = \"identity\", fill = \"coral\") +\n  coord_flip() +\n  labs(\n  title = \"Missing Values in 311 Housing Complaints Dataset\",\n  subtitle = \"Manhattan, 2022-2025\",\n  x = \"Column Name\",\n  y = \"Percentage Missing (%)\"\n  ) +\n  theme_minimal(base_size = 14) +\n  theme(\n  plot.title = element_text(face = \"bold\", size = 16),\n  axis.text.y = element_text(size = 11)\n  )\n\nprint(p2)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#missing-data-summary-tables",
    "href": "project_code_final.html#missing-data-summary-tables",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.11 MISSING DATA SUMMARY TABLES",
    "text": "3.11 MISSING DATA SUMMARY TABLES\n\n3.11.1 Housing Violations – Missingness Summary Table\n\n\nCode\nmissing_summary_housing &lt;- tibble(\n  Metric = c(\n  \"Total Columns\",\n  \"Columns &gt; 0% Missing\",\n  \"Columns &gt; 50% Missing\",\n  \"Columns == 100% Missing\",\n  \"Columns == 0% Missing\"\n  ),\n  Value = c(\n    nrow(missing_housing),\n    nrow(filter(missing_housing, missing_pct &gt; 0)),\n    nrow(filter(missing_housing, missing_pct &gt; 50)),\n    nrow(filter(missing_housing, missing_pct == 100)),\n    nrow(filter(missing_housing, missing_pct == 0))\n  )\n)\n\nmissing_summary_housing\n\n\n# A tibble: 5 × 2\n  Metric                  Value\n  &lt;chr&gt;                   &lt;int&gt;\n1 Total Columns              56\n2 Columns &gt; 0% Missing       17\n3 Columns &gt; 50% Missing       3\n4 Columns == 100% Missing     0\n5 Columns == 0% Missing      39\n\n\n\n\n3.11.2 311 Complaints – Missingness Summary Table\n\n\nCode\nmissing_summary_311 &lt;- tibble(\n  Metric = c(\n  \"Total Columns\",\n  \"Columns &gt; 0% Missing\",\n  \"Columns &gt; 50% Missing\",\n  \"Columns == 100% Missing\",\n  \"Columns == 0% Missing\"\n  ),\n  Value = c(\n    nrow(missing_311),\n    nrow(filter(missing_311, missing_pct &gt; 0)),\n    nrow(filter(missing_311, missing_pct &gt; 50)),\n    nrow(filter(missing_311, missing_pct == 100)),\n    nrow(filter(missing_311, missing_pct == 0))\n  )\n)\n\nmissing_summary_311\n\n\n# A tibble: 5 × 2\n  Metric                  Value\n  &lt;chr&gt;                   &lt;int&gt;\n1 Total Columns              48\n2 Columns &gt; 0% Missing       11\n3 Columns &gt; 50% Missing       8\n4 Columns == 100% Missing     8\n5 Columns == 0% Missing      37",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#missing-value-heatmaps",
    "href": "project_code_final.html#missing-value-heatmaps",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.12 MISSING VALUE HEATMAPS",
    "text": "3.12 MISSING VALUE HEATMAPS\n\n\nCode\n# Simple aggregated missing plot\nplot_missing(housing, percent = TRUE, num_char = 5, max_cols = 10)  \n\n\nScale for y is already present.\nAdding another scale for y, which will replace the existing scale.\nScale for y is already present.\nAdding another scale for y, which will replace the existing scale.\n\n\n\n\n\n\n\n\n\nCode\nplot_missing(sr311, percent = TRUE, num_char = 5, max_cols = 10) \n\n\nScale for y is already present.\nAdding another scale for y, which will replace the existing scale.\nScale for y is already present.\nAdding another scale for y, which will replace the existing scale.\n\n\nWarning: Removed 8 rows containing missing values or values outside the scale range\n(`geom_col()`).\n\n\n\n\n\n\n\n\n\n\n\nCode\nlibrary(redav)\n\n# ========== HOUSING VIOLATIONS - FIXED ==========\nplot_missing(housing,\n             percent = TRUE,\n             num_char = 5, max_cols = 10)  # Shorten column names to 5 characters\n\n\nScale for y is already present.\nAdding another scale for y, which will replace the existing scale.\nScale for y is already present.\nAdding another scale for y, which will replace the existing scale.\n\n\n\n\n\n\n\n\n\nCode\n# Alternative: Manually create cleaner version\n# First, let's see how many columns we're dealing with\ncat(\"Number of columns:\", ncol(housing))\n\n\nNumber of columns: 56",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#year-per-quarter-faceted-plots-and-combined-panel-these-come-right-after-the-category-comparison-block",
    "href": "project_code_final.html#year-per-quarter-faceted-plots-and-combined-panel-these-come-right-after-the-category-comparison-block",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.13 3-year per-quarter faceted plots and combined panel (these come right AFTER the category comparison block)",
    "text": "3.13 3-year per-quarter faceted plots and combined panel (these come right AFTER the category comparison block)\n\n\nCode\n# ----- HOUSING: QUARTERLY CATEGORY TRENDS (3-LINE-QTRS) -----\n\nhousing_quarter_lines &lt;- housing |&gt;\n  filter(!is.na(inspectiondate_clean)) |&gt;\n    mutate(\n      year = year(inspectiondate_clean),\n      quarter = paste0(\"Q\", quarter(inspectiondate_clean))\n    ) |&gt;\n      count(year, quarter, ViolationCategory) |&gt;\n        mutate(\n          quarter = factor(quarter, levels = c(\"Q1\",\"Q2\",\"Q3\",\"Q4\"))\n        )\n\nggplot(housing_quarter_lines,\n       aes(x = quarter, y = n, color = factor(year), group = year)) +\n  geom_line(linewidth = 1.2) +\n  geom_point(size = 2.2) +\n  scale_y_continuous(labels = scales::comma) +\n  scale_color_manual(values = c(\"2023\" = \"#E63946\",\n                                \"2024\" = \"#457B9D\",\n                                \"2025\" = \"#2A9D8F\"),\n                     name = \"Year\") +\n  facet_wrap(~ ViolationCategory, scales = \"free_y\") +\n  theme_minimal(base_size = 14) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.text.x = element_text(angle = 0),\n    legend.position = \"top\"\n  ) +\n  labs(\n  title = \"Housing Violations by Category Across Quarters\",\n  subtitle = \"Manhattan (2023–2025) • 3-Year Trend\",\n  x = \"Quarter\",\n  y = \"Number of Violations\"\n)\n\n\n\n\n\n\n\n\n\nCode\n# ----- 311: QUARTERLY CATEGORY TRENDS (3-LINE-QTRS) -----\n\nsr311_quarter_lines &lt;- sr311 |&gt;\n  filter(!is.na(created_clean)) |&gt;\n    mutate(\n      year = year(created_clean),\n      quarter = paste0(\"Q\", quarter(created_clean))\n    ) |&gt;\n      count(year, quarter, Category) |&gt;\n      mutate(\n        quarter = factor(quarter, levels = c(\"Q1\",\"Q2\",\"Q3\",\"Q4\"))\n      )\n\nggplot(sr311_quarter_lines,\n  aes(x = quarter, y = n, color = factor(year), group = year)) +\n  geom_line(linewidth = 1.2) +\n  geom_point(size = 2.2) +\n  scale_y_continuous(labels = scales::comma) +\n  scale_color_manual(values = c(\"2023\" = \"#E63946\",\n  \"2024\" = \"#457B9D\",\n  \"2025\" = \"#2A9D8F\"),\n  name = \"Year\") +\n  facet_wrap(~ Category, scales = \"free_y\") +\n  theme_minimal(base_size = 14) +\n  theme(\n  plot.title = element_text(face = \"bold\"),\n  axis.text.x = element_text(angle = 0),\n  legend.position = \"top\"\n  ) +\n  labs(\n  title = \"311 Housing Complaints by Category Across Quarters\",\n  subtitle = \"Manhattan (2023–2025) • 3-Year Trend\",\n  x = \"Quarter\",\n  y = \"Number of Complaints\"\n)\n\n\n\n\n\n\n\n\n\nCode\n# ----- COMBINED HOUSING vs 311: QUARTERLY CATEGORY TRENDS -----\n\n# Housing quarterly counts\n\nhousing_q &lt;- housing |&gt;\n  filter(!is.na(inspectiondate_clean)) |&gt;\n    mutate(\n    year = year(inspectiondate_clean),\n    quarter = paste0(\"Q\", quarter(inspectiondate_clean))\n    ) |&gt;\n      count(year, quarter, ViolationCategory) |&gt;\n        rename(Category = ViolationCategory) |&gt;\n          mutate(Source = \"Housing Violations\")\n\n# 311 quarterly counts\n\nsr311_q &lt;- sr311 |&gt;\nfilter(!is.na(created_clean)) |&gt;\n  mutate(\n    year = year(created_clean),\n    quarter = paste0(\"Q\", quarter(created_clean))\n  ) |&gt;\n    count(year, quarter, Category) |&gt;\n      mutate(Source = \"311 Complaints\")\n\n# Combine\n\ncombined_q &lt;- bind_rows(housing_q, sr311_q) |&gt;\n  mutate(\n    quarter = factor(quarter, levels = c(\"Q1\", \"Q2\", \"Q3\", \"Q4\")),\n    year = factor(year)\n  ) |&gt;\n    filter(Category %in% comparison_categories)  # keep only the 7 categories\n\nggplot(combined_q,\n  aes(x = quarter, y = n, color = Source, group = Source)) +\n  geom_line(linewidth = 1.2) +\n  geom_point(size = 2) +\n  facet_wrap(~ Category, scales = \"free_y\") +\n  scale_color_manual(values = c(\n  \"Housing Violations\" = \"#D62828\",\n  \"311 Complaints\" = \"#1D3557\"\n  )) +\n  scale_y_continuous(labels = scales::comma) +\n  theme_minimal(base_size = 14) +\n  theme(\n  legend.position = \"top\",\n  plot.title = element_text(face = \"bold\")\n  ) +\n  labs(\n  title = \"Combined Quarterly Trends: Housing Violations vs 311 Complaints\",\n  subtitle = \"Manhattan (2023–2025) • Faceted by Category\",\n  x = \"Quarter\",\n  y = \"Count\",\n  color = \"Source\"\n)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#housing-violation-monthly-transition-alluvial",
    "href": "project_code_final.html#housing-violation-monthly-transition-alluvial",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.14 Housing Violation Monthly Transition Alluvial",
    "text": "3.14 Housing Violation Monthly Transition Alluvial\n\n\nCode\n# ---- Housing Violation Monthly Transition Alluvial ----\n# Uses cleaned date columns created earlier: inspectiondate_clean, novissued_clean, statusdate_clean\n\n\nviol_flow &lt;- housing |&gt;\n  # select the cleaned date cols we created earlier (keep original cols untouched)\n  select(ViolationID, Class, inspectiondate_clean, novissued_clean, statusdate_clean) |&gt;\n  # convert dates to YYYY-MM character format for clearer alluvial axes\n  mutate(\n    insp_m  = ifelse(!is.na(inspectiondate_clean),\n                     format(floor_date(inspectiondate_clean, \"month\"), \"%Y-%m\"),\n                     NA_character_),\n    nov_m   = ifelse(!is.na(novissued_clean),\n                     format(floor_date(novissued_clean, \"month\"), \"%Y-%m\"),\n                     NA_character_),\n    stat_m  = ifelse(!is.na(statusdate_clean),\n                     format(floor_date(statusdate_clean, \"month\"), \"%Y-%m\"),\n                     NA_character_)\n  ) |&gt;\n  # require an inspection + at least one later stage\n  filter(!is.na(insp_m) & ( !is.na(nov_m) | !is.na(stat_m) )) |&gt;\n  group_by(insp_m, nov_m, stat_m, Class) |&gt;\n  summarise(n = n(), .groups = \"drop\")\n\n# Quick check\nprint(head(viol_flow, 6))\n\n\n# A tibble: 6 × 5\n  insp_m  nov_m   stat_m  Class     n\n  &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;int&gt;\n1 2022-01 2022-01 2022-01 A       115\n2 2022-01 2022-01 2022-01 B       341\n3 2022-01 2022-01 2022-01 C       225\n4 2022-01 2022-01 2022-02 A         3\n5 2022-01 2022-01 2022-02 B        72\n6 2022-01 2022-01 2022-02 C       331\n\n\nCode\n# plot\nggplot(viol_flow,\n       aes(axis1 = insp_m, axis2 = nov_m, axis3 = stat_m, y = n)) +\n  geom_alluvium(aes(fill = Class), width = 0.25, alpha = 0.85) +\n  geom_stratum(width = 0.25) +\n  geom_text(stat = \"stratum\",\n            aes(label = after_stat(stratum)),\n            size = 2.5) +\n  theme_minimal() +\n  labs(\n    title = \"Housing Violations Flow Across Dates (Monthly): Inspection → NOV → Status\",\n    x = \"Month\",\n    y = \"Count\"\n  ) +\n  theme(\n    axis.text.x = element_text(size = 8, angle = 45, hjust = 1),\n    plot.title = element_text(face = \"bold\")\n  )\n\n\nWarning in to_lodes_form(data = data, axes = axis_ind, discern =\nparams$discern): Some strata appear at multiple axes.\nWarning in to_lodes_form(data = data, axes = axis_ind, discern =\nparams$discern): Some strata appear at multiple axes.\nWarning in to_lodes_form(data = data, axes = axis_ind, discern =\nparams$discern): Some strata appear at multiple axes.\n\n\n\n\n\n\n\n\n\n\n3.14.1 Time Series Daily\n\n\nCode\nhousing |&gt;\n  filter(!is.na(inspectiondate_clean)) |&gt;\n  count(inspectiondate_clean) |&gt;\n  ggplot(aes(x = inspectiondate_clean, y = n)) +\n  geom_line(color = \"red\") +\n  labs(title = \"Housing Violations Timeline (daily, Manhattan, 2023-2025)\",\n  x = \"Inspection date\", y = \"Count\") +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nCode\nsr311 |&gt;\n  filter(!is.na(created_clean)) |&gt;\n  count(created_clean) |&gt;\n  ggplot(aes(x = created_clean, y = n)) +\n  geom_line(color = \"orange\") +\n  labs(title = \"311 Requests Timeline (daily, Manhattan, 2023-2025)\",\n  x = \"Created date\", y = \"Count\") +\n  theme_minimal()",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#monthly-combined-time-series-line",
    "href": "project_code_final.html#monthly-combined-time-series-line",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.15 Monthly combined time series (line)",
    "text": "3.15 Monthly combined time series (line)\n\n\nCode\nhousing_month &lt;- housing |&gt;\n  filter(!is.na(inspectiondate_clean)) |&gt;\n  mutate(month = floor_date(inspectiondate_clean, \"month\")) |&gt;\n  count(month, name = \"HousingCount\")\n\nsr311_month &lt;- sr311 |&gt;\n  filter(!is.na(created_clean)) |&gt;\n  mutate(month = floor_date(created_clean, \"month\")) |&gt;\n  count(month, name = \"ComplaintCount\")\n\nmonthly_combined &lt;- full_join(housing_month, sr311_month, by = \"month\") |&gt;\n  replace_na(list(HousingCount = 0, ComplaintCount = 0))\n\nmonthly_combined |&gt;\n  pivot_longer(cols = c(HousingCount, ComplaintCount), names_to = \"Source\", values_to = \"Count\") |&gt;\n  ggplot(aes(x = month, y = Count, color = Source)) +\n  geom_line(size = 1) +\n  geom_point(size = 1.5) +\n  scale_x_date(date_labels = \"%b %Y\", date_breaks = \"1 month\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  labs(title = \"Monthly: Housing Violations vs 311 Complaints (Manhattan)\",\n  x = \"Month\", y = \"Count\")\n\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#top-15-311-complaint-types",
    "href": "project_code_final.html#top-15-311-complaint-types",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.16 Top 15 311 Complaint Types",
    "text": "3.16 Top 15 311 Complaint Types\n\n\nCode\nsr311 |&gt;\n  filter(!is.na(Complaint.Type)) |&gt; \n  count(Complaint.Type) |&gt;\n  slice_max(n, n = 15) |&gt;\n  ggplot(aes(x = reorder(Complaint.Type, n), y = n)) +\n  geom_col(fill = \"steelblue\") +\n  coord_flip() +\n  labs(title = \"Top 15 311 Complaints (Manhattan, 3 Years)\", x = \"\", y = \"Count\") +\n  theme_minimal()",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#top-20-streets-by-housing-violations",
    "href": "project_code_final.html#top-20-streets-by-housing-violations",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.17 Top 20 streets by housing violations",
    "text": "3.17 Top 20 streets by housing violations\n\n\nCode\nhousing |&gt;\nfilter(!is.na(StreetName)) |&gt;\ncount(StreetName) |&gt;\nslice_max(n, n = 20) |&gt;\nggplot(aes(x = reorder(StreetName, n), y = n)) +\ngeom_col(fill = \"steelblue\") +\ncoord_flip() +\nlabs(title = \"Top 20 Manhattan Streets by Housing Violations (2023-2025)\",\nx = \"Street\", y = \"Count\") +\ntheme_minimal()",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#top-20-zips-for-311",
    "href": "project_code_final.html#top-20-zips-for-311",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.18 Top 20 ZIPs for 311",
    "text": "3.18 Top 20 ZIPs for 311\n\n\nCode\nsr311 |&gt;\nfilter(!is.na(Incident.Zip)) |&gt;\ncount(Incident.Zip) |&gt;\nslice_max(n, n = 20) |&gt;\nggplot(aes(x = reorder(Incident.Zip, n), y = n)) +\ngeom_col(fill = \"purple\") +\ncoord_flip() +\nlabs(title = \"Top 20 ZIP Codes by 311 Complaints (Manhattan, 2023-2025)\",\nx = \"ZIP\", y = \"Count\") +\ntheme_minimal()",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#housing-alluvial-class---status-3-years",
    "href": "project_code_final.html#housing-alluvial-class---status-3-years",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.19 Housing Alluvial: Class -> Status (3 Years)",
    "text": "3.19 Housing Alluvial: Class -&gt; Status (3 Years)\n\n\nCode\nhousing |&gt;\nfilter(!is.na(Class), !is.na(CurrentStatusID)) |&gt;\ncount(Class, CurrentStatusID) |&gt;\nggplot(aes(axis1 = Class, axis2 = CurrentStatusID, y = n)) +\ngeom_alluvium(aes(fill = Class), width = 0.25) +\ngeom_stratum(width = 0.25) +\ngeom_text(stat = \"stratum\", aes(label = after_stat(stratum)), size = 3) +\ntheme_minimal() +\nlabs(title = \"Housing Violations: Class → Current Status (3 Years)\", y = \"Count\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#alluvial-class---nov-type",
    "href": "project_code_final.html#alluvial-class---nov-type",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.20 Alluvial: Class -> NOV Type",
    "text": "3.20 Alluvial: Class -&gt; NOV Type\n\n\nCode\nhousing |&gt;\nfilter(!is.na(Class), !is.na(NovType)) |&gt;\ncount(Class, NovType) |&gt;\nggplot(aes(axis1 = Class, axis2 = NovType, y = n)) +\ngeom_alluvium(aes(fill = Class), width = 0.25) +\ngeom_stratum(width = 0.25) +\ngeom_text(stat = \"stratum\", aes(label = after_stat(stratum)), size = 3) +\ntheme_minimal() +\nlabs(title = \"Housing Violations: Class → NOV Type (3 Years)\", y = \"Count\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#spatial-sample-plots",
    "href": "project_code_final.html#spatial-sample-plots",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.21 Spatial sample plots",
    "text": "3.21 Spatial sample plots\n\n\nCode\nhousing |&gt;\n  filter(!is.na(Longitude) & !is.na(Latitude)) |&gt;\n  slice_sample(n = 5000) |&gt;\n  ggplot(aes(x = Longitude, y = Latitude)) +\n  geom_point(alpha = 0.4, size = 0.6) +\n  theme_minimal() +\n  labs(title = \"Housing Violations Locations (sample 5k)\", x = \"Longitude\", y = \"Latitude\")\n\n\n\n\n\n\n\n\n\n\n\nCode\nsr311 |&gt;\n  filter(!is.na(Longitude) & !is.na(Latitude)) |&gt;\n  slice_sample(n = 5000) |&gt;\n  ggplot(aes(x = Longitude, y = Latitude)) +\n  geom_point(alpha = 0.4, size = 0.6, color = \"orange\") +\n  theme_minimal() +\n  labs(title = \"311 Complaints Locations (sample 5k)\", x = \"Longitude\", y = \"Latitude\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#top-15-housing-classes",
    "href": "project_code_final.html#top-15-housing-classes",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "3.22 Top 15 Housing Classes",
    "text": "3.22 Top 15 Housing Classes\n\n\nCode\nhousing |&gt;\n  filter(!is.na(Class)) |&gt;\n  count(Class) |&gt;\n  slice_max(n, n = 15) |&gt;\n  ggplot(aes(x = reorder(Class, n), y = n)) +\n  geom_col(fill = \"darkred\") +\n  coord_flip() +\n  labs(title = \"Top 15 Housing Violation Classes (Manhattan, 2023-2025)\", x = \"Class\", y = \"Count\") +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n\nCode\n# build paths using the month text columns we created earlier (inspection_month, nov_month, status_month)\n\nviol_path_counts &lt;- housing |&gt;\nselect(ViolationID, Class, inspection_month, nov_month, status_month) |&gt;\n\n# require inspection month and at least one later stage (nov or status)\n\nfilter(!is.na(inspection_month) & ( !is.na(nov_month) | !is.na(status_month) )) |&gt;\ngroup_by(inspection_month, nov_month, status_month, Class) |&gt;\nsummarise(n = n(), .groups = \"drop\") |&gt;\narrange(desc(n))\n\n# Quick view\n\nprint(head(viol_path_counts, 8))\n\n\n# A tibble: 8 × 5\n  inspection_month nov_month     status_month  Class     n\n  &lt;chr&gt;            &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt; &lt;int&gt;\n1 June 2025        June 2025     June 2025     A      6411\n2 November 2025    &lt;NA&gt;          November 2025 I      5666\n3 April 2024       April 2024    April 2024    A      5505\n4 March 2023       March 2023    March 2023    A      5340\n5 February 2022    February 2022 February 2022 A      4991\n6 October 2025     October 2025  October 2025  B      4026\n7 November 2022    &lt;NA&gt;          November 2022 I      3529\n8 August 2025      August 2025   August 2025   B      3280\n\n\nCode\n# Alluvial with 3 axes (InspectionMonth -&gt; NOVMonth -&gt; StatusMonth)\n\nggplot(viol_path_counts,\naes(axis1 = inspection_month, axis2 = nov_month, axis3 = status_month, y = n)) +\ngeom_alluvium(aes(fill = Class), width = 0.25, alpha = 0.85) +\ngeom_stratum(width = 0.25) +\ngeom_text(stat = \"stratum\", aes(label = after_stat(stratum)), size = 2.5) +\ntheme_minimal() +\nlabs(title = \"Housing Violations Flow (Monthly): Inspection → NOV → Final Status\",\nx = \"Stage (Month Year)\", y = \"Count\") +\ntheme(axis.text.x = element_text(size = 9, angle = 45, hjust = 1))\n\n\nWarning in to_lodes_form(data = data, axes = axis_ind, discern =\nparams$discern): Some strata appear at multiple axes.\nWarning in to_lodes_form(data = data, axes = axis_ind, discern =\nparams$discern): Some strata appear at multiple axes.\nWarning in to_lodes_form(data = data, axes = axis_ind, discern =\nparams$discern): Some strata appear at multiple axes.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#smoothed-temporal-view-research-question-what-are-the-overall-trends-when-we-smooth-out-monthly-fluctuations",
    "href": "project_code_final.html#smoothed-temporal-view-research-question-what-are-the-overall-trends-when-we-smooth-out-monthly-fluctuations",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "4.1 Smoothed Temporal View Research Question: What are the overall trends when we smooth out monthly fluctuations?",
    "text": "4.1 Smoothed Temporal View Research Question: What are the overall trends when we smooth out monthly fluctuations?\n\n\nCode\n# Aggregate by quarter for smoother trend\nhousing_2[, Quarter := quarter(InspectionDate)]\nhousing_2[, YearQuarter := paste0(Year, \"-Q\", Quarter)]\n\nviol_by_quarter &lt;- housing_2[, .N, by = .(Year, Quarter, YearQuarter)][order(Year, Quarter)]\n\n# Create quarter labels\nviol_by_quarter[, QuarterLabel := paste0(Year, \"\\nQ\", Quarter)]\n\n# Plot\nggplot(viol_by_quarter, aes(x = factor(YearQuarter, levels = YearQuarter), \n                              y = N, group = 1)) +\n  geom_line(color = \"steelblue\", linewidth = 1.2) +\n  geom_point(color = \"steelblue\", size = 3) +\n  scale_y_continuous(labels = scales::comma) +\n  labs(\n    title = \"Housing Violations by Quarter\",\n    subtitle = \"Manhattan, 2022-2025 (smoothed trend)\",\n    x = \"Quarter\",\n    y = \"Number of Violations\"\n  ) +\n  theme_minimal(base_size = 16) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  )",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#what-types-of-violations-are-most-common-research-question-what-are-the-most-common-housing-violations-that-tenants-and-inspectors-encounter",
    "href": "project_code_final.html#what-types-of-violations-are-most-common-research-question-what-are-the-most-common-housing-violations-that-tenants-and-inspectors-encounter",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "4.2 What Types of Violations Are Most Common? Research Question: What are the most common housing violations that tenants and inspectors encounter?",
    "text": "4.2 What Types of Violations Are Most Common? Research Question: What are the most common housing violations that tenants and inspectors encounter?",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#violation-severity-and-status-research-question-what-types-of-violations-are-most-common-and-how-seriously-are-they-being-addressed",
    "href": "project_code_final.html#violation-severity-and-status-research-question-what-types-of-violations-are-most-common-and-how-seriously-are-they-being-addressed",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "4.3 Violation Severity and Status Research Question: What types of violations are most common, and how seriously are they being addressed?",
    "text": "4.3 Violation Severity and Status Research Question: What types of violations are most common, and how seriously are they being addressed?\n\n\nCode\n# === GRAPH 3A: Violation Class Distribution ===\n# Class definitions: A=Non-Hazardous, B=Hazardous, C=Immediately Hazardous, I=Failure to Register\n\nclass_data &lt;- housing_2[, .N, by=Class][order(-N)]\n\n# Add descriptive labels\nclass_data[, ClassLabel := fcase(\n  Class == \"A\", \"Class A: Non-Hazardous\",\n  Class == \"B\", \"Class B: Hazardous\",\n  Class == \"C\", \"Class C: Immediately Hazardous\",\n  Class == \"I\", \"Class I: Failure to Register\",\n  default = Class\n)]\n\nggplot(class_data, aes(x = reorder(ClassLabel, N), y = N, fill = Class)) +\n  geom_bar(stat = \"identity\") +\n  geom_text(aes(label = scales::comma(N)), hjust = -0.1, size = 5) +\n  coord_flip() +\n  scale_y_continuous(labels = scales::comma, expand = expansion(mult = c(0, 0.15))) +\n  labs(\n    title = \"Housing Violations by Severity Class\",\n    subtitle = \"Manhattan, 2022-2025\",\n    x = \"Violation Class\",\n    y = \"Number of Violations\",\n    caption = \"Class A: Non-hazardous | Class B: Hazardous | Class C: Immediately Hazardous\"\n  ) +\n  theme_minimal(base_size = 16) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    legend.position = \"none\"\n  )\n\n\n\n\n\n\n\n\n\nCode\n# === GRAPH 3B: Rent-Impairing Violations ===\n\nrent_data &lt;- housing_2[, .N, by=RentImpairing]\nrent_data[, Label := ifelse(RentImpairing == \"Y\", \n                             \"Rent-Impairing\\n(affects habitability)\", \n                             \"Non-Rent-Impairing\")]\n\nggplot(rent_data, aes(x = Label, y = N, fill = RentImpairing)) +\n  geom_bar(stat = \"identity\") +\n  geom_text(aes(label = paste0(scales::comma(N), \"\\n(\", \n                                round(N/sum(N)*100, 1), \"%)\")), \n            vjust = -0.5, size = 5) +\n  scale_fill_manual(values = c(\"N\" = \"steelblue\", \"Y\" = \"darkred\")) +\n  scale_y_continuous(labels = scales::comma, expand = expansion(mult = c(0, 0.1))) +\n  labs(\n    title = \"Rent-Impairing vs Non-Rent-Impairing Violations\",\n    subtitle = \"Manhattan, 2022-2025\",\n    x = \"\",\n    y = \"Number of Violations\"\n  ) +\n  theme_minimal(base_size = 16) +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    legend.position = \"none\"\n  )",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  },
  {
    "objectID": "project_code_final.html#save-cleaned-rds-as-backups",
    "href": "project_code_final.html#save-cleaned-rds-as-backups",
    "title": "3  NYC Building Violation Analysis EDAV Project",
    "section": "4.4 Save cleaned RDS as backups",
    "text": "4.4 Save cleaned RDS as backups\n\n\nCode\nsaveRDS(housing, file = \"housing_manhattan_3years_clean.rds\")\nsaveRDS(sr311,   file = \"sr311_manhattan_3years_clean.rds\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>NYC Building Violation Analysis EDAV Project</span>"
    ]
  }
]